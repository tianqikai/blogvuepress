<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>10. GC调优工具 | TQK的个人博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/images/logo.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="TQK的个人博客">
    <meta name="author" content="冰岛红茶">
    <meta name="keywords" content="个人博客 ，java ，后端">
    
    <link rel="preload" href="/assets/css/0.styles.b4c82722.css" as="style"><link rel="preload" href="/assets/js/app.657caddf.js" as="script"><link rel="preload" href="/assets/js/2.99bf64c9.js" as="script"><link rel="preload" href="/assets/js/49.1e47ab60.js" as="script"><link rel="prefetch" href="/assets/js/10.684c3112.js"><link rel="prefetch" href="/assets/js/100.b59c8d77.js"><link rel="prefetch" href="/assets/js/101.70c18cee.js"><link rel="prefetch" href="/assets/js/102.786989a8.js"><link rel="prefetch" href="/assets/js/103.8dfe3a2e.js"><link rel="prefetch" href="/assets/js/104.cc5fedfd.js"><link rel="prefetch" href="/assets/js/105.f3927b90.js"><link rel="prefetch" href="/assets/js/106.99e4cb32.js"><link rel="prefetch" href="/assets/js/107.43e37378.js"><link rel="prefetch" href="/assets/js/108.79d9c6e9.js"><link rel="prefetch" href="/assets/js/109.179d78d9.js"><link rel="prefetch" href="/assets/js/11.698fe406.js"><link rel="prefetch" href="/assets/js/110.e93501fc.js"><link rel="prefetch" href="/assets/js/111.eaa68a7e.js"><link rel="prefetch" href="/assets/js/112.3fb7de24.js"><link rel="prefetch" href="/assets/js/113.8b184f56.js"><link rel="prefetch" href="/assets/js/114.77a44634.js"><link rel="prefetch" href="/assets/js/115.6101f5eb.js"><link rel="prefetch" href="/assets/js/116.eee69879.js"><link rel="prefetch" href="/assets/js/117.c4d74f84.js"><link rel="prefetch" href="/assets/js/118.870e4d95.js"><link rel="prefetch" href="/assets/js/119.841058b3.js"><link rel="prefetch" href="/assets/js/12.fe199234.js"><link rel="prefetch" href="/assets/js/120.4dbf1a2c.js"><link rel="prefetch" href="/assets/js/121.52f062fb.js"><link rel="prefetch" href="/assets/js/122.b8a6dbdb.js"><link rel="prefetch" href="/assets/js/123.188e8690.js"><link rel="prefetch" href="/assets/js/124.2d28a65f.js"><link rel="prefetch" href="/assets/js/125.0b3f7ec3.js"><link rel="prefetch" href="/assets/js/126.e57e437b.js"><link rel="prefetch" href="/assets/js/127.adcfe0dc.js"><link rel="prefetch" href="/assets/js/128.09bc3ad8.js"><link rel="prefetch" href="/assets/js/129.25a21739.js"><link rel="prefetch" href="/assets/js/13.421a4ff0.js"><link rel="prefetch" href="/assets/js/130.7d3cc00b.js"><link rel="prefetch" href="/assets/js/131.c102eff9.js"><link rel="prefetch" href="/assets/js/132.3198b3d0.js"><link rel="prefetch" href="/assets/js/133.53e6a261.js"><link rel="prefetch" href="/assets/js/134.7afbf937.js"><link rel="prefetch" href="/assets/js/135.a2ea82d4.js"><link rel="prefetch" href="/assets/js/136.b7870128.js"><link rel="prefetch" href="/assets/js/137.277a38d0.js"><link rel="prefetch" href="/assets/js/138.d33c5c99.js"><link rel="prefetch" href="/assets/js/139.8f22ef8e.js"><link rel="prefetch" href="/assets/js/14.40abcf20.js"><link rel="prefetch" href="/assets/js/140.e959dc5e.js"><link rel="prefetch" href="/assets/js/141.4712ef9d.js"><link rel="prefetch" href="/assets/js/142.2e11915d.js"><link rel="prefetch" href="/assets/js/143.238615ad.js"><link rel="prefetch" href="/assets/js/144.dde11e3b.js"><link rel="prefetch" href="/assets/js/145.4130e979.js"><link rel="prefetch" href="/assets/js/146.3772d154.js"><link rel="prefetch" href="/assets/js/147.c4c012c8.js"><link rel="prefetch" href="/assets/js/148.98a5816b.js"><link rel="prefetch" href="/assets/js/149.0e194576.js"><link rel="prefetch" href="/assets/js/15.45304a1e.js"><link rel="prefetch" href="/assets/js/150.6b311d98.js"><link rel="prefetch" href="/assets/js/151.287ba1d4.js"><link rel="prefetch" href="/assets/js/152.24ebc08b.js"><link rel="prefetch" href="/assets/js/153.9b8a9cb7.js"><link rel="prefetch" href="/assets/js/154.6e158d9b.js"><link rel="prefetch" href="/assets/js/155.1416e63e.js"><link rel="prefetch" href="/assets/js/156.e8e48abc.js"><link rel="prefetch" href="/assets/js/157.83264f62.js"><link rel="prefetch" href="/assets/js/158.e6f8c602.js"><link rel="prefetch" href="/assets/js/159.0fe3cbfd.js"><link rel="prefetch" href="/assets/js/16.5ac24625.js"><link rel="prefetch" href="/assets/js/160.f2eef1ac.js"><link rel="prefetch" href="/assets/js/161.0d7517d3.js"><link rel="prefetch" href="/assets/js/162.33041ef2.js"><link rel="prefetch" href="/assets/js/163.20bbd775.js"><link rel="prefetch" href="/assets/js/164.f7344d6f.js"><link rel="prefetch" href="/assets/js/165.6515ffd1.js"><link rel="prefetch" href="/assets/js/166.28ba6d4f.js"><link rel="prefetch" href="/assets/js/167.d160eac1.js"><link rel="prefetch" href="/assets/js/168.b67be307.js"><link rel="prefetch" href="/assets/js/169.5a0cc798.js"><link rel="prefetch" href="/assets/js/17.2133d462.js"><link rel="prefetch" href="/assets/js/170.903c9154.js"><link rel="prefetch" href="/assets/js/171.1bddb272.js"><link rel="prefetch" href="/assets/js/172.79f3e27c.js"><link rel="prefetch" href="/assets/js/173.ca65dbe6.js"><link rel="prefetch" href="/assets/js/174.c1abdfb0.js"><link rel="prefetch" href="/assets/js/175.6d4894d9.js"><link rel="prefetch" href="/assets/js/176.d011896f.js"><link rel="prefetch" href="/assets/js/177.29b29834.js"><link rel="prefetch" href="/assets/js/178.f3b61f4c.js"><link rel="prefetch" href="/assets/js/179.e23a429c.js"><link rel="prefetch" href="/assets/js/18.6d20b12b.js"><link rel="prefetch" href="/assets/js/180.2b6113ae.js"><link rel="prefetch" href="/assets/js/181.271b0e14.js"><link rel="prefetch" href="/assets/js/182.588ca94d.js"><link rel="prefetch" href="/assets/js/183.00edb8e5.js"><link rel="prefetch" href="/assets/js/184.c3715d28.js"><link rel="prefetch" href="/assets/js/185.b83e4a34.js"><link rel="prefetch" href="/assets/js/186.f9d4390f.js"><link rel="prefetch" href="/assets/js/187.8575a153.js"><link rel="prefetch" href="/assets/js/188.bd033c3b.js"><link rel="prefetch" href="/assets/js/189.95781a65.js"><link rel="prefetch" href="/assets/js/19.2f8716ce.js"><link rel="prefetch" href="/assets/js/190.48b4bd5d.js"><link rel="prefetch" href="/assets/js/191.a93de23c.js"><link rel="prefetch" href="/assets/js/192.6c881897.js"><link rel="prefetch" href="/assets/js/193.faf8531c.js"><link rel="prefetch" href="/assets/js/194.8c5d4ad3.js"><link rel="prefetch" href="/assets/js/195.fc8e0760.js"><link rel="prefetch" href="/assets/js/196.c1847702.js"><link rel="prefetch" href="/assets/js/197.fb145dc6.js"><link rel="prefetch" href="/assets/js/198.9b0ecca5.js"><link rel="prefetch" href="/assets/js/199.5f39041e.js"><link rel="prefetch" href="/assets/js/20.56f7854f.js"><link rel="prefetch" href="/assets/js/200.1b0f44f7.js"><link rel="prefetch" href="/assets/js/201.f1f7e04b.js"><link rel="prefetch" href="/assets/js/202.b2deda71.js"><link rel="prefetch" href="/assets/js/203.0c1d9508.js"><link rel="prefetch" href="/assets/js/204.37852e01.js"><link rel="prefetch" href="/assets/js/205.d2689f54.js"><link rel="prefetch" href="/assets/js/206.b7529ec7.js"><link rel="prefetch" href="/assets/js/207.4ee3ead5.js"><link rel="prefetch" href="/assets/js/208.ee888f52.js"><link rel="prefetch" href="/assets/js/209.492deace.js"><link rel="prefetch" href="/assets/js/21.b02a4407.js"><link rel="prefetch" href="/assets/js/210.d843da19.js"><link rel="prefetch" href="/assets/js/211.4e3af679.js"><link rel="prefetch" href="/assets/js/212.7d63aeb2.js"><link rel="prefetch" href="/assets/js/213.0bfe648a.js"><link rel="prefetch" href="/assets/js/214.49de382c.js"><link rel="prefetch" href="/assets/js/215.b89c6139.js"><link rel="prefetch" href="/assets/js/216.56cfc19b.js"><link rel="prefetch" href="/assets/js/217.8ff2f314.js"><link rel="prefetch" href="/assets/js/218.6c94c8bf.js"><link rel="prefetch" href="/assets/js/219.209ce6bf.js"><link rel="prefetch" href="/assets/js/22.a870ac2a.js"><link rel="prefetch" href="/assets/js/220.d805c8fe.js"><link rel="prefetch" href="/assets/js/221.d15c8e1f.js"><link rel="prefetch" href="/assets/js/222.26e830f8.js"><link rel="prefetch" href="/assets/js/223.0b3b014f.js"><link rel="prefetch" href="/assets/js/224.73a5abd2.js"><link rel="prefetch" href="/assets/js/225.7a779ff4.js"><link rel="prefetch" href="/assets/js/226.5aff5e21.js"><link rel="prefetch" href="/assets/js/227.d12945d0.js"><link rel="prefetch" href="/assets/js/228.ea7a38ea.js"><link rel="prefetch" href="/assets/js/229.77c3d8b3.js"><link rel="prefetch" href="/assets/js/23.940536c9.js"><link rel="prefetch" href="/assets/js/230.ae534523.js"><link rel="prefetch" href="/assets/js/231.c123d70c.js"><link rel="prefetch" href="/assets/js/232.2d45ee4e.js"><link rel="prefetch" href="/assets/js/233.45a8c26c.js"><link rel="prefetch" href="/assets/js/234.b7b68f26.js"><link rel="prefetch" href="/assets/js/235.212b7813.js"><link rel="prefetch" href="/assets/js/236.a4f42f4d.js"><link rel="prefetch" href="/assets/js/237.8acf8f8a.js"><link rel="prefetch" href="/assets/js/238.993fe0a0.js"><link rel="prefetch" href="/assets/js/239.75018fb1.js"><link rel="prefetch" href="/assets/js/24.f478b0fc.js"><link rel="prefetch" href="/assets/js/240.e0b3e5e8.js"><link rel="prefetch" href="/assets/js/241.973af47a.js"><link rel="prefetch" href="/assets/js/242.aff063ee.js"><link rel="prefetch" href="/assets/js/243.fa5c9fcb.js"><link rel="prefetch" href="/assets/js/244.41a8c8cb.js"><link rel="prefetch" href="/assets/js/245.029a9ebe.js"><link rel="prefetch" href="/assets/js/246.f48552f3.js"><link rel="prefetch" href="/assets/js/247.dbd7e9d3.js"><link rel="prefetch" href="/assets/js/248.03a8a5fb.js"><link rel="prefetch" href="/assets/js/249.19a6e695.js"><link rel="prefetch" href="/assets/js/25.93c4d7be.js"><link rel="prefetch" href="/assets/js/250.aab441f7.js"><link rel="prefetch" href="/assets/js/251.c649f825.js"><link rel="prefetch" href="/assets/js/252.95fe7542.js"><link rel="prefetch" href="/assets/js/253.d5bced78.js"><link rel="prefetch" href="/assets/js/254.939751d3.js"><link rel="prefetch" href="/assets/js/255.902630e1.js"><link rel="prefetch" href="/assets/js/256.c7b8698a.js"><link rel="prefetch" href="/assets/js/257.0047f6af.js"><link rel="prefetch" href="/assets/js/258.6048e274.js"><link rel="prefetch" href="/assets/js/259.56cd48f1.js"><link rel="prefetch" href="/assets/js/26.7135f4ff.js"><link rel="prefetch" href="/assets/js/260.cbc54a6f.js"><link rel="prefetch" href="/assets/js/261.e026c02a.js"><link rel="prefetch" href="/assets/js/262.12b5e4a8.js"><link rel="prefetch" href="/assets/js/263.e98cd4fc.js"><link rel="prefetch" href="/assets/js/264.783bca53.js"><link rel="prefetch" href="/assets/js/265.5a367a63.js"><link rel="prefetch" href="/assets/js/266.8e715c02.js"><link rel="prefetch" href="/assets/js/267.bacd2314.js"><link rel="prefetch" href="/assets/js/268.dec12cb5.js"><link rel="prefetch" href="/assets/js/269.27a026b3.js"><link rel="prefetch" href="/assets/js/27.0b4ad970.js"><link rel="prefetch" href="/assets/js/270.ed8cb817.js"><link rel="prefetch" href="/assets/js/271.62b56cb9.js"><link rel="prefetch" href="/assets/js/272.067884f9.js"><link rel="prefetch" href="/assets/js/273.4082c0b2.js"><link rel="prefetch" href="/assets/js/274.1ecc206e.js"><link rel="prefetch" href="/assets/js/275.b62c4838.js"><link rel="prefetch" href="/assets/js/276.529fc5ac.js"><link rel="prefetch" href="/assets/js/277.ea0e6ede.js"><link rel="prefetch" href="/assets/js/278.8664a8d8.js"><link rel="prefetch" href="/assets/js/279.b4de2f5f.js"><link rel="prefetch" href="/assets/js/28.1efdefb5.js"><link rel="prefetch" href="/assets/js/280.ed9dd9fb.js"><link rel="prefetch" href="/assets/js/281.d47cda26.js"><link rel="prefetch" href="/assets/js/282.a899b49d.js"><link rel="prefetch" href="/assets/js/283.28626350.js"><link rel="prefetch" href="/assets/js/284.7c552dd1.js"><link rel="prefetch" href="/assets/js/285.0abf3e98.js"><link rel="prefetch" href="/assets/js/286.e91ede8e.js"><link rel="prefetch" href="/assets/js/287.9b4b010a.js"><link rel="prefetch" href="/assets/js/288.dd16a85a.js"><link rel="prefetch" href="/assets/js/289.431815da.js"><link rel="prefetch" href="/assets/js/29.02c8e8ce.js"><link rel="prefetch" href="/assets/js/290.d3d3b375.js"><link rel="prefetch" href="/assets/js/291.5ca2efc2.js"><link rel="prefetch" href="/assets/js/292.56260233.js"><link rel="prefetch" href="/assets/js/293.95b438ce.js"><link rel="prefetch" href="/assets/js/294.0d4dc624.js"><link rel="prefetch" href="/assets/js/295.f508017f.js"><link rel="prefetch" href="/assets/js/296.0bd23d59.js"><link rel="prefetch" href="/assets/js/297.5630d8bf.js"><link rel="prefetch" href="/assets/js/298.44a1d0ef.js"><link rel="prefetch" href="/assets/js/299.9d0f9cd5.js"><link rel="prefetch" href="/assets/js/3.153ee460.js"><link rel="prefetch" href="/assets/js/30.3d00a0e7.js"><link rel="prefetch" href="/assets/js/300.2a5a6aec.js"><link rel="prefetch" href="/assets/js/301.b9e59dc8.js"><link rel="prefetch" href="/assets/js/302.bec72867.js"><link rel="prefetch" href="/assets/js/31.6fd1cc67.js"><link rel="prefetch" href="/assets/js/32.e7315569.js"><link rel="prefetch" href="/assets/js/33.46b65c82.js"><link rel="prefetch" href="/assets/js/34.acc90bf9.js"><link rel="prefetch" href="/assets/js/35.f27ca552.js"><link rel="prefetch" href="/assets/js/36.e5d29c14.js"><link rel="prefetch" href="/assets/js/37.5c4a3563.js"><link rel="prefetch" href="/assets/js/38.a81619aa.js"><link rel="prefetch" href="/assets/js/39.e0c74e65.js"><link rel="prefetch" href="/assets/js/4.ff45933e.js"><link rel="prefetch" href="/assets/js/40.6059e3fb.js"><link rel="prefetch" href="/assets/js/41.e1f20917.js"><link rel="prefetch" href="/assets/js/42.159e8379.js"><link rel="prefetch" href="/assets/js/43.00103280.js"><link rel="prefetch" href="/assets/js/44.0d7a4156.js"><link rel="prefetch" href="/assets/js/45.04c78109.js"><link rel="prefetch" href="/assets/js/46.302f6c77.js"><link rel="prefetch" href="/assets/js/47.28a420b2.js"><link rel="prefetch" href="/assets/js/48.5e8c8ae0.js"><link rel="prefetch" href="/assets/js/5.b3ed9b47.js"><link rel="prefetch" href="/assets/js/50.f23ad968.js"><link rel="prefetch" href="/assets/js/51.f5532d7c.js"><link rel="prefetch" href="/assets/js/52.4dfaf96f.js"><link rel="prefetch" href="/assets/js/53.cffe6324.js"><link rel="prefetch" href="/assets/js/54.1df66145.js"><link rel="prefetch" href="/assets/js/55.d91e4b5c.js"><link rel="prefetch" href="/assets/js/56.2bf7fae7.js"><link rel="prefetch" href="/assets/js/57.53b0021f.js"><link rel="prefetch" href="/assets/js/58.af978ce3.js"><link rel="prefetch" href="/assets/js/59.aeeadc39.js"><link rel="prefetch" href="/assets/js/6.e76ac207.js"><link rel="prefetch" href="/assets/js/60.681365a6.js"><link rel="prefetch" href="/assets/js/61.dc59feb7.js"><link rel="prefetch" href="/assets/js/62.8c10d9e3.js"><link rel="prefetch" href="/assets/js/63.80e1ef7e.js"><link rel="prefetch" href="/assets/js/64.5dc78e37.js"><link rel="prefetch" href="/assets/js/65.00125d13.js"><link rel="prefetch" href="/assets/js/66.5cdac702.js"><link rel="prefetch" href="/assets/js/67.5bb351bb.js"><link rel="prefetch" href="/assets/js/68.54c4bbb8.js"><link rel="prefetch" href="/assets/js/69.d764cb9e.js"><link rel="prefetch" href="/assets/js/7.b8c9a8e6.js"><link rel="prefetch" href="/assets/js/70.0d1dc590.js"><link rel="prefetch" href="/assets/js/71.1dc3ba59.js"><link rel="prefetch" href="/assets/js/72.614e364e.js"><link rel="prefetch" href="/assets/js/73.757fda23.js"><link rel="prefetch" href="/assets/js/74.c31c99c5.js"><link rel="prefetch" href="/assets/js/75.c4e6ea57.js"><link rel="prefetch" href="/assets/js/76.0d1ccde9.js"><link rel="prefetch" href="/assets/js/77.9b471f0d.js"><link rel="prefetch" href="/assets/js/78.cc86fc1f.js"><link rel="prefetch" href="/assets/js/79.59a875c3.js"><link rel="prefetch" href="/assets/js/8.622d4025.js"><link rel="prefetch" href="/assets/js/80.b6dcd5d4.js"><link rel="prefetch" href="/assets/js/81.753cbe56.js"><link rel="prefetch" href="/assets/js/82.4811e473.js"><link rel="prefetch" href="/assets/js/83.d09b4139.js"><link rel="prefetch" href="/assets/js/84.3e0db3b0.js"><link rel="prefetch" href="/assets/js/85.7c3c0eaf.js"><link rel="prefetch" href="/assets/js/86.2ebc9c45.js"><link rel="prefetch" href="/assets/js/87.a4e47e98.js"><link rel="prefetch" href="/assets/js/88.60082ea3.js"><link rel="prefetch" href="/assets/js/89.440566d8.js"><link rel="prefetch" href="/assets/js/9.529109f9.js"><link rel="prefetch" href="/assets/js/90.b63c1035.js"><link rel="prefetch" href="/assets/js/91.7c4108b6.js"><link rel="prefetch" href="/assets/js/92.993df76c.js"><link rel="prefetch" href="/assets/js/93.37982304.js"><link rel="prefetch" href="/assets/js/94.712f459d.js"><link rel="prefetch" href="/assets/js/95.ff855ca7.js"><link rel="prefetch" href="/assets/js/96.08e6f1bb.js"><link rel="prefetch" href="/assets/js/97.d6b80764.js"><link rel="prefetch" href="/assets/js/98.d2c5bdc2.js"><link rel="prefetch" href="/assets/js/99.fbc45681.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4c82722.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.png" alt="TQK的个人博客" class="logo"> <span class="site-name can-hide">TQK的个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="入门基础" class="dropdown-title"><span class="title">入门基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="入门基础" class="mobile-dropdown-title"><span class="title">入门基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/java/" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/base/seniorJava/" class="nav-link">
  Java基础(高级)
</a></li><li class="dropdown-item"><!----> <a href="/base/data-structure/" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/base/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/base/JVM/" class="nav-link router-link-active">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/base/es6/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/base/shell/" class="nav-link">
  Shell脚本
</a></li><li class="dropdown-item"><!----> <a href="/base/golang/" class="nav-link">
  go语言
</a></li><li class="dropdown-item"><!----> <a href="/base/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/base/c/" class="nav-link">
  C语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/db/mongdb/" class="nav-link">
  Mongdb
</a></li><li class="dropdown-item"><!----> <a href="/db/oracle/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/db/fenkufenbiao/" class="nav-link">
  分库分表
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><span class="title">常用框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用框架" class="mobile-dropdown-title"><span class="title">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/Spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/framework/springmvc/" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/framework/mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/framework/springboot/" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/framework/dubbo/" class="nav-link">
  Dubbo
</a></li><li class="dropdown-item"><!----> <a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><span class="title">微服务</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务" class="mobile-dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SpringCloud
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/SpringCloud/Eureka/" class="nav-link">
  Eureka
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Consul/" class="nav-link">
  Consul
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Feign/" class="nav-link">
  Feign
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Hystrix/" class="nav-link">
  Hystrix
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/zuul/" class="nav-link">
  Zuul
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/gateway/" class="nav-link">
  Gateway
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/sleuth/" class="nav-link">
  Sleuth链路追踪
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Apollo/" class="nav-link">
  Apollo配置中心
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringCloudAlibaba
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/SpringCloudAlibaba/nacos/" class="nav-link">
  Nacos
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloudAlibaba/Sentinel/" class="nav-link">
  Sentinel
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloudAlibaba/seata/" class="nav-link">
  seata
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><span class="title">分布式</span> <span class="arrow down"></span></button> <button type="button" aria-label="分布式" class="mobile-dropdown-title"><span class="title">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middleware/netty/" class="nav-link">
  netty
</a></li><li class="dropdown-item"><!----> <a href="/middleware/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/middleware/zookeeper/" class="nav-link">
  zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/middleware/sso/" class="nav-link">
  单点登陆
</a></li><li class="dropdown-item"><!----> <a href="/middleware/Elasticsearch/" class="nav-link">
  Elasticsearch
</a></li><li class="dropdown-item"><h4>
          MQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/middleware/RabbitMQ/" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/middleware/kafka/" class="nav-link">
  kafka
</a></li><li class="dropdown-subitem"><a href="/middleware/RocketMQ/" class="nav-link">
  RocketMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云原生" class="dropdown-title"><span class="title">云原生</span> <span class="arrow down"></span></button> <button type="button" aria-label="云原生" class="mobile-dropdown-title"><span class="title">云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middleware/network/" class="nav-link">
  云原生网络
</a></li><li class="dropdown-item"><!----> <a href="/middleware/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/middleware/kubernetes/" class="nav-link">
  kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/tool/Jenkins/" class="nav-link">
  Jenkins
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/alibaba/" class="nav-link">
  阿里巴巴Java开发手册
</a></li><li class="dropdown-item"><!----> <a href="/other/english/" class="nav-link">
  编程英语
</a></li><li class="dropdown-item"><!----> <a href="/other/idea/" class="nav-link">
  IDEA快捷键
</a></li><li class="dropdown-item"><!----> <a href="/other/url/" class="nav-link">
  常用网站
</a></li><li class="dropdown-item"><!----> <a href="/other/jdk/" class="nav-link">
  Liunx安装jdk
</a></li><li class="dropdown-item"><!----> <a href="/other/VMware/" class="nav-link">
  VMware
</a></li><li class="dropdown-item"><!----> <a href="/other/jiqun/" class="nav-link">
  Liunx集群
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">
  maven
</a></li><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/tool/jemeter/" class="nav-link">
  jemeter
</a></li><li class="dropdown-item"><!----> <a href="/tool/postman/" class="nav-link">
  postman
</a></li><li class="dropdown-item"><!----> <a href="/tool/PowerDesigner/" class="nav-link">
  PowerDesigner
</a></li><li class="dropdown-item"><!----> <a href="/tool/Nodejs/" class="nav-link">
  Nodejs
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/tianqikai/blogvuepress" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="入门基础" class="dropdown-title"><span class="title">入门基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="入门基础" class="mobile-dropdown-title"><span class="title">入门基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/java/" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/base/seniorJava/" class="nav-link">
  Java基础(高级)
</a></li><li class="dropdown-item"><!----> <a href="/base/data-structure/" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/base/design-pattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/base/JVM/" class="nav-link router-link-active">
  JVM
</a></li><li class="dropdown-item"><!----> <a href="/base/es6/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/base/shell/" class="nav-link">
  Shell脚本
</a></li><li class="dropdown-item"><!----> <a href="/base/golang/" class="nav-link">
  go语言
</a></li><li class="dropdown-item"><!----> <a href="/base/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/base/c/" class="nav-link">
  C语言
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/db/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/db/mongdb/" class="nav-link">
  Mongdb
</a></li><li class="dropdown-item"><!----> <a href="/db/oracle/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><!----> <a href="/db/fenkufenbiao/" class="nav-link">
  分库分表
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><span class="title">常用框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用框架" class="mobile-dropdown-title"><span class="title">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/Spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/framework/springmvc/" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/framework/mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/framework/springboot/" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/framework/dubbo/" class="nav-link">
  Dubbo
</a></li><li class="dropdown-item"><!----> <a href="/framework/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><span class="title">微服务</span> <span class="arrow down"></span></button> <button type="button" aria-label="微服务" class="mobile-dropdown-title"><span class="title">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          SpringCloud
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/SpringCloud/Eureka/" class="nav-link">
  Eureka
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Consul/" class="nav-link">
  Consul
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Feign/" class="nav-link">
  Feign
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Hystrix/" class="nav-link">
  Hystrix
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/zuul/" class="nav-link">
  Zuul
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/gateway/" class="nav-link">
  Gateway
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/sleuth/" class="nav-link">
  Sleuth链路追踪
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloud/Apollo/" class="nav-link">
  Apollo配置中心
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringCloudAlibaba
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/SpringCloudAlibaba/nacos/" class="nav-link">
  Nacos
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloudAlibaba/Sentinel/" class="nav-link">
  Sentinel
</a></li><li class="dropdown-subitem"><a href="/framework/SpringCloudAlibaba/seata/" class="nav-link">
  seata
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><span class="title">分布式</span> <span class="arrow down"></span></button> <button type="button" aria-label="分布式" class="mobile-dropdown-title"><span class="title">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middleware/netty/" class="nav-link">
  netty
</a></li><li class="dropdown-item"><!----> <a href="/middleware/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/middleware/zookeeper/" class="nav-link">
  zookeeper
</a></li><li class="dropdown-item"><!----> <a href="/middleware/sso/" class="nav-link">
  单点登陆
</a></li><li class="dropdown-item"><!----> <a href="/middleware/Elasticsearch/" class="nav-link">
  Elasticsearch
</a></li><li class="dropdown-item"><h4>
          MQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/middleware/RabbitMQ/" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/middleware/kafka/" class="nav-link">
  kafka
</a></li><li class="dropdown-subitem"><a href="/middleware/RocketMQ/" class="nav-link">
  RocketMQ
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="云原生" class="dropdown-title"><span class="title">云原生</span> <span class="arrow down"></span></button> <button type="button" aria-label="云原生" class="mobile-dropdown-title"><span class="title">云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/middleware/network/" class="nav-link">
  云原生网络
</a></li><li class="dropdown-item"><!----> <a href="/middleware/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/middleware/kubernetes/" class="nav-link">
  kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/tool/Jenkins/" class="nav-link">
  Jenkins
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/alibaba/" class="nav-link">
  阿里巴巴Java开发手册
</a></li><li class="dropdown-item"><!----> <a href="/other/english/" class="nav-link">
  编程英语
</a></li><li class="dropdown-item"><!----> <a href="/other/idea/" class="nav-link">
  IDEA快捷键
</a></li><li class="dropdown-item"><!----> <a href="/other/url/" class="nav-link">
  常用网站
</a></li><li class="dropdown-item"><!----> <a href="/other/jdk/" class="nav-link">
  Liunx安装jdk
</a></li><li class="dropdown-item"><!----> <a href="/other/VMware/" class="nav-link">
  VMware
</a></li><li class="dropdown-item"><!----> <a href="/other/jiqun/" class="nav-link">
  Liunx集群
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">
  maven
</a></li><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/tool/jemeter/" class="nav-link">
  jemeter
</a></li><li class="dropdown-item"><!----> <a href="/tool/postman/" class="nav-link">
  postman
</a></li><li class="dropdown-item"><!----> <a href="/tool/PowerDesigner/" class="nav-link">
  PowerDesigner
</a></li><li class="dropdown-item"><!----> <a href="/tool/Nodejs/" class="nav-link">
  Nodejs
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/tianqikai/blogvuepress" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JVM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/base/JVM/" aria-current="page" class="sidebar-link">JVM调优</a></li><li><a href="/base/JVM/JVM基础知识-0.html" class="sidebar-link">1. JVM基础知识</a></li><li><a href="/base/JVM/深入理解JVM的内存区域-1.html" class="sidebar-link">2. 深入理解JVM的内存区域</a></li><li><a href="/base/JVM/JVM中的对象及引用-2.html" class="sidebar-link">3. JVM中的对象及引用</a></li><li><a href="/base/JVM/垃圾回收机制及算法-3.html" class="sidebar-link">4. 垃圾回收机制及算法</a></li><li><a href="/base/JVM/垃圾回收器串讲及 HostSpot 的细节实现-4.html" class="sidebar-link">5. 垃圾回收器及HostSpot的细节</a></li><li><a href="/base/JVM/Class文件结构及深入字节码指令-5.html" class="sidebar-link">6. Class文件结构及字节码指令</a></li><li><a href="/base/JVM/类加载与类加载器-6.html" class="sidebar-link">7. 类加载与类加载器</a></li><li><a href="/base/JVM/方法调用的底层实现-8.html" class="sidebar-link">8.方法调用的底层实现</a></li><li><a href="/base/JVM/Java语法糖及实现-9.html" class="sidebar-link">9.Java语法糖及实现</a></li><li><a href="/base/JVM/GC 调优工具-a.html" class="active sidebar-link">10. GC调优工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-jdk自带工具-重点" class="sidebar-link">10.1 JDK自带工具（重点）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-1-jps" class="sidebar-link">10.1.1 jps</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-2-jstat" class="sidebar-link">10.1.2 jstat</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-3-jinfo" class="sidebar-link">10.1.3 jinfo</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-4-jmap" class="sidebar-link">10.1.4 jmap</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-5-jhat" class="sidebar-link">10.1.5 jhat</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-6-jstack" class="sidebar-link">10.1.6 jstack</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-7-vm-参数分类" class="sidebar-link">10.1.7 VM 参数分类</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-9-命令工具总结-重点" class="sidebar-link">10.1.9 命令工具总结（重点）</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-1-9-可视化工具" class="sidebar-link">10.1.9 可视化工具</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-arthas阿里工具" class="sidebar-link">10.2 Arthas阿里工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-1-下载和安装" class="sidebar-link">10.2.1 下载和安装</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-2-快速入门" class="sidebar-link">10.2.2 快速入门</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-3-dashboard-命令" class="sidebar-link">10.2.3 dashboard 命令</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-4-thread-命令" class="sidebar-link">10.2.4 thread 命令</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-5-jvm-命令" class="sidebar-link">10.2.5 jvm 命令</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-6-jad-命令" class="sidebar-link">10.2.6 jad 命令</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-7-trace-命令" class="sidebar-link">10.2.7 trace 命令</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-8-monitor-命令" class="sidebar-link">10.2.8 monitor 命令</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-9-watch-命令" class="sidebar-link">10.2.9 watch 命令</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-2-10-命令总结" class="sidebar-link">10.2.10 命令总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-3-动态追踪技术底层分析" class="sidebar-link">10.3 动态追踪技术底层分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-3-1-java-agent-技术" class="sidebar-link">10.3.1 Java Agent 技术</a></li></ul></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-4-gcviewer可视化分析工具" class="sidebar-link">10.4 GCViewer可视化分析工具</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-5-prometheus监控工具" class="sidebar-link">10.5 Prometheus监控工具</a></li><li class="sidebar-sub-header"><a href="/base/JVM/GC 调优工具-a.html#_10-6-grafana监控工具" class="sidebar-link">10.6 Grafana监控工具</a></li></ul></li><li><a href="/base/JVM/JVM 性能调优-b.html" class="sidebar-link">11.JVM性能调优（一）</a></li><li><a href="/base/JVM/JVM 性能调优二-c.html" class="sidebar-link">12.JVM性能调优（二）</a></li><li><a href="/base/JVM/JVM 调优实战-d.html" class="sidebar-link">13.JVM调优实战</a></li><li><a href="/base/JVM/MAT分析内存泄漏-e.html" class="sidebar-link">14.MAT分析内存泄漏</a></li><li><a href="/base/JVM/直接内存与JVM源码分析-f.html" class="sidebar-link">14. 直接内存与JVM源码分析</a></li><li><a href="/base/JVM/JVM编译技术原理-g.html" class="sidebar-link">15 JVM编译技术原理</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_10-gc调优工具"><a href="#_10-gc调优工具" class="header-anchor">#</a> 10. GC调优工具</h1> <h2 id="_10-1-jdk自带工具-重点"><a href="#_10-1-jdk自带工具-重点" class="header-anchor">#</a> 10.1 JDK自带工具（重点）</h2> <p><a data-fancybox="" title="JDK自带工具" href="./image/jdktool.jpg"><img src="/assets/img/jdktool.f7030ebe.jpg" alt="JDK自带工具"></a></p> <h3 id="_10-1-1-jps"><a href="#_10-1-1-jps" class="header-anchor">#</a> 10.1.1 jps</h3> <p><strong>列出当前机器上正在运行的虚拟机进程，JPS 从操作系统的临时目录上去找（所以有一些信息可能显示不全)</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jps</span>
<span class="token number">4107</span> Jps
<span class="token number">23677</span> Bootstrap
<span class="token number">3551</span> Molandi.jar

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">常用参数</p> <p><font color="red"><strong>-q</strong></font> : 仅仅显示进程<br> <font color="red"><strong>-m</strong></font> : 输出主函数传入的参数. 下的 hello 就是在执行程序时从命令行输入的参数<br> <font color="red"><strong>-l</strong></font> : 输出应用程序主类完整 package 名称或 jar 完整名称<br> <font color="red"><strong>-v</strong></font> : 列出 jvm 参数, -Xms20m -Xmx50m 是启动程序指定的 jvm 参数</p></div> <h3 id="_10-1-2-jstat"><a href="#_10-1-2-jstat" class="header-anchor">#</a> 10.1.2 jstat</h3> <p><strong>是用于监视虚拟机各种运行状态信息的命令行工具。它可以显示本地或者远程虚拟机进程中的类装载、内存、垃圾收集、JIT 编译等运行数据，在没有 GUI 图形界面，只提供了纯文本控制台环境的服务器上，它将是运行期定位虚拟机性能问题的首选工具</strong></p> <div class="custom-block tip"><p class="custom-block-title">常用参数：</p> <p><font color="red"><strong>-class</strong></font> (类加载器)<br> <font color="red"><strong>-compiler</strong></font> (JIT)<br> <font color="red"><strong>-gc</strong></font> (GC 堆状态)<br> <font color="red"><strong>-gccapacity</strong></font> (各区大小)<br> <font color="red"><strong>-gccause</strong></font> (最近一次 GC 统计和原因)<br> <font color="red"><strong>-gcnew</strong></font> (新区统计)<br> <font color="red"><strong>-gcnewcapacity</strong></font> (新区大小)<br> <font color="red"><strong>-gcold</strong></font> (老区统计)<br> <font color="red"><strong>-gcoldcapacity</strong></font> (老区大小)<br> <font color="red"><strong>-gcpermcapacity</strong></font> (永久区大小)<br> <font color="red"><strong>-gcutil</strong></font> (GC 统计汇总)<br> <font color="red"><strong>-printcompilation</strong></font> (HotSpot 编译统计)</p></div> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jstat -gc 3551</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12219.2</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>


//假设需要每 <span class="token number">1000</span> 毫秒查询一次进程 <span class="token number">3551</span> 垃圾收集状况，一共查询 <span class="token number">10</span> 次，那命令应当是：jstat -gc <span class="token number">3551</span> <span class="token number">1000</span> <span class="token number">10</span>

<span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jstat -gc 3551  1000 10</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>
<span class="token number">2880.0</span> <span class="token number">2880.0</span>  <span class="token number">0.0</span>   <span class="token number">540.1</span>  <span class="token number">23360.0</span>  <span class="token number">12429.3</span>   <span class="token number">58084.0</span>    <span class="token number">26856.9</span>   <span class="token number">71808.0</span> <span class="token number">62607.5</span> <span class="token number">8576.0</span> <span class="token number">7031.2</span>   <span class="token number">6819</span>   <span class="token number">26.774</span>   <span class="token number">8</span>      <span class="token number">0.859</span>   <span class="token number">27.633</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">显示列表参数说明</p> <p><font color="red"><strong>S0C</strong></font>：第一个幸存区（From 区）的大小<br> <font color="red"><strong>S1C</strong></font>：第二个幸存区（To 区）的大小<br> <font color="red"><strong>S0U</strong></font>：第一个幸存区的使用大小<br> <font color="red"><strong>S1U</strong></font>：第二个幸存区的使用大小<br> <font color="red"><strong>EC</strong></font>：伊甸园（Eden）区的大小<br> <font color="red"><strong>EU</strong></font>：伊甸园（Eden）区的使用大小<br> <font color="red"><strong>OC</strong></font>：老年代大小<br> <font color="red"><strong>OU</strong></font>：老年代使用大小<br> <font color="red"><strong>MC</strong></font>：方法区大小<br> <font color="red"><strong>MU</strong></font>：方法区使用大小<br> <font color="red"><strong>CCSC</strong></font>:压缩类空间大小<br> <font color="red"><strong>CCSU</strong></font>:压缩类空间使用大小<br> <font color="red"><strong>YGC</strong></font>：年轻代垃圾回收次数<br> <font color="red"><strong>YGCT</strong></font>：年轻代垃圾回收消耗时间<br> <font color="red"><strong>FGC</strong></font>：老年代垃圾回收次数<br> <font color="red"><strong>FGCT</strong></font>：老年代垃圾回收消耗时间<br> <font color="red"><strong>GCT</strong></font>：垃圾回收消耗总时间</p></div> <h3 id="_10-1-3-jinfo"><a href="#_10-1-3-jinfo" class="header-anchor">#</a> 10.1.3 jinfo</h3> <p><strong>查看和修改虚拟机的参数</strong></p> <p><font color="red"><strong>jinfo –sysprops </strong></font>可以查看由 System.getProperties()取得的参数</p> <p><font color="red"><strong>jinfo –flag </strong></font>未被显式指定的参数的系统默认值</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>//默认不打印垃圾回收日志
<span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jinfo -flag PrintGC 3551</span>
-XX:-PrintGC
//开启打印垃圾回收
<span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jinfo -flag +PrintGC 3551</span>
<span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jinfo -flag PrintGC 3551</span>
-XX:+PrintGC
//关闭打印垃圾回收
<span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jinfo -flag -PrintGC 3551</span>
<span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jinfo -flag PrintGC 3551</span>
-XX:-PrintGC
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><font color="red"><strong>jinfo –flags</strong></font>（注意 s）显示虚拟机的参数</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jinfo -flags 3551</span>
Attaching to process ID <span class="token number">3551</span>, please wait<span class="token punctuation">..</span>.
Debugger attached successfully.
Server compiler detected.
JVM version is <span class="token number">25.231</span>-b11
Non-default VM flags: -XX:CICompilerCount<span class="token operator">=</span><span class="token number">2</span> -XX:InitialHeapSize<span class="token operator">=</span><span class="token number">31457280</span> -XX:MaxHeapSize<span class="token operator">=</span><span class="token number">482344960</span> -XX:MaxNewSize<span class="token operator">=</span><span class="token number">160759808</span> -XX:MinHeapDeltaBytes<span class="token operator">=</span><span class="token number">196608</span> -XX:NewSize<span class="token operator">=</span><span class="token number">10485760</span> -XX:OldSize<span class="token operator">=</span><span class="token number">20971520</span> -XX:+UseCompressedClassPointers -XX:+UseCompressedOops 
Command line: 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_10-1-4-jmap"><a href="#_10-1-4-jmap" class="header-anchor">#</a> 10.1.4 jmap</h3> <p>用于生成堆转储快照（一般称为 heapdump 或 dump 文件）。jmap 的作用并不仅仅是为了获取 dump 文件，它还可以查询 finalize 执行队列、Java 堆和永久代的详细信息，如空间使用率、当前用的是哪种收集器等。和 jinfo 命令一样，jmap 有不少功能在 Windows 平台下都是受限的，
除了生成 dump 文件的 -dump 选项和用于查看每个类的实例、空间占用统计的<font color="red"><strong>-histo</strong></font>选项在所有操作系统都提供之外，其余选项都只能在 Linux/Solaris 下使用。</p> <p><font color="red"><strong>-heap 打印 heap 的概要信息 jmap –heap &lt;pid&gt; </strong></font></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">[</span>root<span class="token annotation punctuation">@VM_0_15_centos</span> <span class="token operator">~</span><span class="token punctuation">]</span># jmap <span class="token operator">-</span>heap <span class="token number">3551</span>
<span class="token class-name">Attaching</span> <span class="token keyword">to</span> <span class="token namespace">process</span> <span class="token class-name">ID</span> <span class="token number">3551</span><span class="token punctuation">,</span> please wait<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">Debugger</span> attached <span class="token class-name"><span class="token namespace">successfully<span class="token punctuation">.</span></span>
Server</span> compiler detected<span class="token punctuation">.</span>
JVM version is <span class="token number">25.231</span><span class="token operator">-</span>b11

using thread<span class="token operator">-</span>local object <span class="token class-name"><span class="token namespace">allocation<span class="token punctuation">.</span></span>
Mark</span> <span class="token class-name">Sweep</span> <span class="token class-name">Compact</span> GC

<span class="token class-name">Heap</span> <span class="token class-name">Configuration</span><span class="token operator">:</span>
   <span class="token class-name">MinHeapFreeRatio</span>         <span class="token operator">=</span> <span class="token number">40</span>
   <span class="token class-name">MaxHeapFreeRatio</span>         <span class="token operator">=</span> <span class="token number">70</span>
   <span class="token class-name">MaxHeapSize</span>              <span class="token operator">=</span> <span class="token number">482344960</span> <span class="token punctuation">(</span><span class="token number">460.0</span>MB<span class="token punctuation">)</span>
   <span class="token class-name">NewSize</span>                  <span class="token operator">=</span> <span class="token number">10485760</span> <span class="token punctuation">(</span><span class="token number">10.0</span>MB<span class="token punctuation">)</span>
   <span class="token class-name">MaxNewSize</span>               <span class="token operator">=</span> <span class="token number">160759808</span> <span class="token punctuation">(</span><span class="token number">153.3125</span>MB<span class="token punctuation">)</span>
   <span class="token class-name">OldSize</span>                  <span class="token operator">=</span> <span class="token number">20971520</span> <span class="token punctuation">(</span><span class="token number">20.0</span>MB<span class="token punctuation">)</span>
   <span class="token class-name">NewRatio</span>                 <span class="token operator">=</span> <span class="token number">2</span>
   <span class="token class-name">SurvivorRatio</span>            <span class="token operator">=</span> <span class="token number">8</span>
   <span class="token class-name">MetaspaceSize</span>            <span class="token operator">=</span> <span class="token number">21807104</span> <span class="token punctuation">(</span><span class="token number">20.796875</span>MB<span class="token punctuation">)</span>
   <span class="token class-name">CompressedClassSpaceSize</span> <span class="token operator">=</span> <span class="token number">1073741824</span> <span class="token punctuation">(</span><span class="token number">1024.0</span>MB<span class="token punctuation">)</span>
   <span class="token class-name">MaxMetaspaceSize</span>         <span class="token operator">=</span> <span class="token number">17592186044415</span> MB
   <span class="token class-name">G1HeapRegionSize</span>         <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span>MB<span class="token punctuation">)</span>

<span class="token class-name">Heap</span> <span class="token class-name">Usage</span><span class="token operator">:</span>
<span class="token class-name">New</span> <span class="token class-name">Generation</span> <span class="token punctuation">(</span><span class="token class-name">Eden</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token class-name">Survivor</span> <span class="token class-name">Space</span><span class="token punctuation">)</span><span class="token operator">:</span>
   capacity <span class="token operator">=</span> <span class="token number">26869760</span> <span class="token punctuation">(</span><span class="token number">25.625</span>MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">13740688</span> <span class="token punctuation">(</span><span class="token number">13.104141235351562</span>MB<span class="token punctuation">)</span>
   free     <span class="token operator">=</span> <span class="token number">13129072</span> <span class="token punctuation">(</span><span class="token number">12.520858764648438</span>MB<span class="token punctuation">)</span>
   <span class="token number">51.138112137957314</span><span class="token operator">%</span> used
<span class="token class-name">Eden</span> <span class="token class-name">Space</span><span class="token operator">:</span>
   capacity <span class="token operator">=</span> <span class="token number">23920640</span> <span class="token punctuation">(</span><span class="token number">22.8125</span>MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">13054168</span> <span class="token punctuation">(</span><span class="token number">12.449424743652344</span>MB<span class="token punctuation">)</span>
   free     <span class="token operator">=</span> <span class="token number">10866472</span> <span class="token punctuation">(</span><span class="token number">10.363075256347656</span>MB<span class="token punctuation">)</span>
   <span class="token number">54.572820794092465</span><span class="token operator">%</span> used
<span class="token class-name">From</span> <span class="token class-name">Space</span><span class="token operator">:</span>
   capacity <span class="token operator">=</span> <span class="token number">2949120</span> <span class="token punctuation">(</span><span class="token number">2.8125</span>MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">686520</span> <span class="token punctuation">(</span><span class="token number">0.6547164916992188</span>MB<span class="token punctuation">)</span>
   free     <span class="token operator">=</span> <span class="token number">2262600</span> <span class="token punctuation">(</span><span class="token number">2.1577835083007812</span>MB<span class="token punctuation">)</span>
   <span class="token number">23.27880859375</span><span class="token operator">%</span> used
<span class="token class-name">To</span> <span class="token class-name">Space</span><span class="token operator">:</span>
   capacity <span class="token operator">=</span> <span class="token number">2949120</span> <span class="token punctuation">(</span><span class="token number">2.8125</span>MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span>MB<span class="token punctuation">)</span>
   free     <span class="token operator">=</span> <span class="token number">2949120</span> <span class="token punctuation">(</span><span class="token number">2.8125</span>MB<span class="token punctuation">)</span>
   <span class="token number">0.0</span><span class="token operator">%</span> used
tenured generation<span class="token operator">:</span>
   capacity <span class="token operator">=</span> <span class="token number">59478016</span> <span class="token punctuation">(</span><span class="token number">56.72265625</span>MB<span class="token punctuation">)</span>
   used     <span class="token operator">=</span> <span class="token number">27524040</span> <span class="token punctuation">(</span><span class="token number">26.24897003173828</span>MB<span class="token punctuation">)</span>
   free     <span class="token operator">=</span> <span class="token number">31953976</span> <span class="token punctuation">(</span><span class="token number">30.47368621826172</span>MB<span class="token punctuation">)</span>
   <span class="token number">46.27598876196543</span><span class="token operator">%</span> used

<span class="token number">28438</span> interned <span class="token class-name">Strings</span> occupying <span class="token number">2978696</span> bytes<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Heap Configuration: <span class="token comment">##堆配置情况，也就是 JVM 参数配置的结果[平常说的 tomcat 配置 JVM 参数，就是在配置这些]   </span>
MinHeapFreeRatio <span class="token operator">=</span> <span class="token number">40</span> <span class="token comment">##最小堆使用比例   </span>
MaxHeapFreeRatio <span class="token operator">=</span> <span class="token number">70</span> <span class="token comment">##最大堆可用比例   </span>
MaxHeapSize <span class="token operator">=</span> <span class="token number">2147483648</span> <span class="token punctuation">(</span><span class="token number">2048</span>.0MB<span class="token punctuation">)</span> <span class="token comment">##最大堆空间大小   </span>
NewSize <span class="token operator">=</span> <span class="token number">268435456</span> <span class="token punctuation">(</span><span class="token number">256</span>.0MB<span class="token punctuation">)</span> <span class="token comment">##新生代分配大小   </span>
MaxNewSize <span class="token operator">=</span> <span class="token number">268435456</span> <span class="token punctuation">(</span><span class="token number">256</span>.0MB<span class="token punctuation">)</span> <span class="token comment">##最大可新生代分配大小   </span>
OldSize <span class="token operator">=</span> <span class="token number">5439488</span> <span class="token punctuation">(</span><span class="token number">5</span>.1875MB<span class="token punctuation">)</span> <span class="token comment">##老年代大小   </span>
NewRatio <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">##新生代比例   </span>
SurvivorRatio <span class="token operator">=</span> <span class="token number">8</span> <span class="token comment">##新生代与 suvivor 的比例   </span>
PermSize <span class="token operator">=</span> <span class="token number">134217728</span> <span class="token punctuation">(</span><span class="token number">128</span>.0MB<span class="token punctuation">)</span> <span class="token comment">##perm 区 永久代大小   </span>
MaxPermSize <span class="token operator">=</span> <span class="token number">134217728</span> <span class="token punctuation">(</span><span class="token number">128</span>.0MB<span class="token punctuation">)</span> <span class="token comment">##最大可分配 perm 区 也就是永久代大小   </span>
Heap Usage: <span class="token comment">##堆使用情况【堆内存实际的使用情况】   </span>
New Generation <span class="token punctuation">(</span>Eden + <span class="token number">1</span> Survivor Space<span class="token punctuation">)</span>: <span class="token comment">##新生代（伊甸区 Eden 区 + 幸存区 survior(1+2)空间）   </span>
capacity <span class="token operator">=</span> <span class="token number">241631232</span> <span class="token punctuation">(</span><span class="token number">230</span>.4375MB<span class="token punctuation">)</span> <span class="token comment">##伊甸区容量   </span>
used <span class="token operator">=</span> <span class="token number">77776272</span> <span class="token punctuation">(</span><span class="token number">74</span>.17323303222656MB<span class="token punctuation">)</span> <span class="token comment">##已经使用大小   </span>
<span class="token function">free</span> <span class="token operator">=</span> <span class="token number">163854960</span> <span class="token punctuation">(</span><span class="token number">156</span>.26426696777344MB<span class="token punctuation">)</span> <span class="token comment">##剩余容量   </span>
<span class="token number">32.188004570534986</span>% used <span class="token comment">##使用比例   </span>
Eden Space: <span class="token comment">##伊甸区   </span>
capacity <span class="token operator">=</span> <span class="token number">214827008</span> <span class="token punctuation">(</span><span class="token number">204</span>.875MB<span class="token punctuation">)</span> <span class="token comment">##伊甸区容量   </span>
used <span class="token operator">=</span> <span class="token number">74442288</span> <span class="token punctuation">(</span><span class="token number">70</span>.99369812011719MB<span class="token punctuation">)</span> <span class="token comment">##伊甸区使用   </span>
<span class="token function">free</span> <span class="token operator">=</span> <span class="token number">140384720</span> <span class="token punctuation">(</span><span class="token number">133</span>.8813018798828MB<span class="token punctuation">)</span> <span class="token comment">##伊甸区当前剩余容量   </span>
<span class="token number">34.65220164496263</span>% used <span class="token comment">##伊甸区使用情况   </span>
From Space: <span class="token comment">##survior1 区   </span>
capacity <span class="token operator">=</span> <span class="token number">26804224</span> <span class="token punctuation">(</span><span class="token number">25</span>.5625MB<span class="token punctuation">)</span> <span class="token comment">##survior1 区容量   </span>
used <span class="token operator">=</span> <span class="token number">3333984</span> <span class="token punctuation">(</span><span class="token number">3</span>.179534912109375MB<span class="token punctuation">)</span> <span class="token comment">##surviror1 区已使用情况  </span>
<span class="token function">free</span> <span class="token operator">=</span> <span class="token number">23470240</span> <span class="token punctuation">(</span><span class="token number">22</span>.382965087890625MB<span class="token punctuation">)</span> <span class="token comment">##surviror1 区剩余容量   </span>
<span class="token number">12.43827838477995</span>% used <span class="token comment">##survior1 区使用比例   </span>
To Space: <span class="token comment">##survior2 区   </span>
capacity <span class="token operator">=</span> <span class="token number">26804224</span> <span class="token punctuation">(</span><span class="token number">25</span>.5625MB<span class="token punctuation">)</span> <span class="token comment">##survior2 区容量   </span>
used <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0</span>.0MB<span class="token punctuation">)</span> <span class="token comment">##survior2 区已使用情况   </span>
<span class="token function">free</span> <span class="token operator">=</span> <span class="token number">26804224</span> <span class="token punctuation">(</span><span class="token number">25</span>.5625MB<span class="token punctuation">)</span> <span class="token comment">##survior2 区剩余容量   </span>
<span class="token number">0.0</span>% used <span class="token comment">## survior2 区使用比例   </span>
PS Old Generation: <span class="token comment">##老年代使用情况   </span>
capacity <span class="token operator">=</span> <span class="token number">1879048192</span> <span class="token punctuation">(</span><span class="token number">1792</span>.0MB<span class="token punctuation">)</span> <span class="token comment">##老年代容量   </span>
used <span class="token operator">=</span> <span class="token number">30847928</span> <span class="token punctuation">(</span><span class="token number">29</span>.41887664794922MB<span class="token punctuation">)</span> <span class="token comment">##老年代已使用容量   </span>
<span class="token function">free</span> <span class="token operator">=</span> <span class="token number">1848200264</span> <span class="token punctuation">(</span><span class="token number">1762</span>.5811233520508MB<span class="token punctuation">)</span> <span class="token comment">##老年代剩余容量   </span>
<span class="token number">1.6416783843721663</span>% used <span class="token comment">##老年代使用比例  </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p><font color="red"><strong>-histo 打印每个 class 的实例数目,内存占用,类全名信息</strong></font><br>
jmap –histo &lt;pid&gt;<br>
jmap –histo:live &lt;pid&gt;如果live子参数加上后,只统计活的对象数量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>jmap –histo:live <span class="token number">3551</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><font color="red"><strong>-dump 生成的堆转储快照（比较重要）</strong></font><br>
jmap -dump:live,format=b,file=heap.bin &lt;pid&gt;<br>
Sun JDK 提供 jhat（JVM Heap Analysis Tool）命令与 jmap 搭配使用，来分析 jmap 生成的堆转储快照</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jmap -dump:live,format=b,file=heap.bin 3551</span>
Dumping heap to /root/heap.bin <span class="token punctuation">..</span>.
Heap dump <span class="token function">file</span> created

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_10-1-5-jhat"><a href="#_10-1-5-jhat" class="header-anchor">#</a> 10.1.5 jhat</h3> <p>jhat dump文件名</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@VM_0_15_centos ~<span class="token punctuation">]</span><span class="token comment"># jhat  heap.bin </span>
Reading from heap.bin<span class="token punctuation">..</span>.
Dump <span class="token function">file</span> created Mon Jul <span class="token number">26</span> <span class="token number">23</span>:57:53 CST <span class="token number">2021</span>
Snapshot read, resolving<span class="token punctuation">..</span>.
Resolving <span class="token number">538082</span> objects<span class="token punctuation">..</span>.
Chasing references, <span class="token function">expect</span> <span class="token number">107</span> dots<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
Eliminating duplicate references<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
Snapshot resolved.
Started HTTP server on port <span class="token number">7000</span>
Server is ready.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>后屏幕显示“Server is ready.”的提示后，
<a title="JVM 的命令行参数参考" href="http://122.51.144.197:7000/">用户在浏览器中键入http://122.51.144.197:7000/就可以访问详情</a>
使用 jhat 可以在服务器上生成堆转储文件分析（一般不推荐，毕竟占用服务器的资源，比如一个文件就有 1 个 G 的话就需要大约吃一个 1G 的内存资源）</p> <h3 id="_10-1-6-jstack"><a href="#_10-1-6-jstack" class="header-anchor">#</a> 10.1.6 jstack</h3> <p>（Stack Trace for Java）命令用于生成虚拟机当前时刻的线程快照。线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈的集合，生成线程快照的主要目的是定位线程出现长时间停顿的原因，如线程间死锁、死循环、请求外部资源导致的长时间等待等都是导致线程长时间停顿的常见原因。</p> <p>在代码中可以用 java.lang.Thread 类的 getAllStackTraces（）方法用于获取虚拟机中所有线程的StackTraceElement对象。使用这个方法可以通过简单的几行代码就完成 jstack 的大部分功能，在实际项目中不妨调用这个方法做个管理员页面，可以随时使用浏览器来查看线程堆栈</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>jstack  <span class="token number">12360</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a data-fancybox="" title="DeadLock" href="./image/deadlock.jpg"><img src="/assets/img/deadlock.b0631454.jpg" alt="DeadLock"></a></p> <h3 id="_10-1-7-vm-参数分类"><a href="#_10-1-7-vm-参数分类" class="header-anchor">#</a> 10.1.7 VM 参数分类</h3> <p><a title="JVM 的命令行参数参考" href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html">JVM 的命令行参数参考：https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html</a></p> <ol><li><strong>标准： -开头，所有的 java虚拟机都支持</strong></li></ol> <p>保证 Java 虚拟机（JVM）的所有实现都支持标准选项。它们用于执行常见操作，例如检查JRE版本，设置类路径，启用详细输出等</p> <ol start="2"><li><strong>非标准：-X 开头，特定版本HotSpot支持特定命令</strong></li></ol> <p>非标准选项是特定于 Java HotSpot 虚拟机的通用选项，因此不能保证所有 JVM 实现都支持它们，并且它们可能会发生变化。这些选项以开头-X。<br>
-Xms30m -Xmx30m -Xss1m</p> <ol start="3"><li><strong>高级选项：以开头-XX:</strong></li></ol> <p>这些是开发人员选项，用于调整 Java HotSpot 虚拟机操作的特定区域，这些区域通常具有特定的系统要求，并且可能需要对系统配置参数的特权访问。也不能保证所有 JVM 实现都支持它们，并且它们可能会发生变化。</p> <h3 id="_10-1-9-命令工具总结-重点"><a href="#_10-1-9-命令工具总结-重点" class="header-anchor">#</a> 10.1.9 命令工具总结（重点）</h3> <ol><li><p><strong>生产服务器推荐开启 -XX:-HeapDumpOnOutOfMemoryError 默认关闭，建议开启</strong><br>
在 java.lang.OutOfMemoryError 异常出现时，输出一个 dump 文件，记录当时的堆内存快照。 -XX:HeapDumpPath=./java_pid &lt;pid&gt;.hprof 用来设置堆内存快照的存储文件路径，默认是 java 进程启动位置。</p></li> <li><p><strong>调优之前开启、调优之后关闭</strong>
-XX:+PrintGC 调试跟踪之打印简单的
GC 信息参数: -XX:+PrintGCDetails, +XX:+PrintGCTimeStamps
打印详细的 GC 信息 -Xlogger:logpath 设置 gc 的日志路，如： -Xlogger:log/gc.log， 将 gc.log 的路径设置到当前目录的 log 目录下.</p></li></ol> <p>应用场景：将 gc 的日志独立写入日志文件，将 GC 日志与系统业务日志进行了分离，方便开发人员进行追踪分析。</p> <p><strong>-XX:+PrintHeapAtGC， 打印推信息</strong><br>
参数设置： -XX：+PrintHeapAtGC<br>
应用场景： 获取 Heap 在每次垃圾回收前后的使用状况 -XX:+TraceClassLoading</p> <p><strong>参数方法：-XX:+TraceClassLoading</strong>
应用场景：在系统控制台信息中看到 class 加载的过程和具体的 class 信息，可用以分析类的加载顺序以及是否可进行精简操作。</p> <p><strong>-XX:+DisableExplicitGC</strong> 禁止在运行期显式地调用 System.gc()</p> <h3 id="_10-1-9-可视化工具"><a href="#_10-1-9-可视化工具" class="header-anchor">#</a> 10.1.9 可视化工具</h3> <ol><li>Jconsole
(略)</li> <li>visualvm</li></ol> <p><a title="插件中心地址" href=" https://visualvm.github.io ">插件中心地址 https://visualvm.github.io</a></p> <p>但是注意版本问题，不同的 JDK 所带的 visualvm 是不一样的，下载插件时需要下对应的版本。 一般来说，这个工具是本机调试用，一般生产上来说，你一般是用不了的（除非启用远程连接）
<a data-fancybox="" title="visualVM" href="./image/visualVM.jpg"><img src="/assets/img/visualVM.42e417df.jpg" alt="DeadLock"></a></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * VM Args：-Xms30m -Xmx30m -XX:+PrintGCDetails
 * 堆内存溢出（直接溢出）
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeapOom</span> <span class="token punctuation">{</span>
    <span class="token comment">//实际开发中不要使用大的数组和对象、字符串</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">35</span><span class="token operator">*</span><span class="token number">1000</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//35m的数组（堆）</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><a data-fancybox="" title="visualVM" href="./image/visualVM1.jpg"><img src="/assets/img/visualVM1.0224cbaf.jpg" alt="DeadLock"></a></p> <h2 id="_10-2-arthas阿里工具"><a href="#_10-2-arthas阿里工具" class="header-anchor">#</a> 10.2 Arthas阿里工具</h2> <p><a title="Arthas阿里工具" href="https://alibaba.github.io/arthas">官方文档参考 https://alibaba.github.io/arthas</a></p> <p>Arthas 是 Alibaba 开源的 Java 诊断工具，深受开发者喜爱。</p> <p>Arthas 支持JDK6+，支持 Linux/Mac/Windows，采用命令行交互模式，同时提供丰富的 Tab 自动补全功能，进一步方便进行问题的定位 和诊断</p> <h3 id="_10-2-1-下载和安装"><a href="#_10-2-1-下载和安装" class="header-anchor">#</a> 10.2.1 下载和安装</h3> <p>不需要安装，就是一个 jar 包</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">curl</span> -O https://alibaba.github.io/arthas/arthas-boot.jar 
java -jar arthas-boot.jar 
启动 arthas 的 jar 包是 arthas-boot.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_10-2-2-快速入门"><a href="#_10-2-2-快速入门" class="header-anchor">#</a> 10.2.2 快速入门</h3> <ol><li>直接 java -jar arthas-boot.jar。选择 attach 的进程绑定</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>java -jar arthas-boot.jar 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a data-fancybox="" title="快速入门" href="./image/arthas2.jpg"><img src="/assets/img/arthas2.2cd894e9.jpg" alt="快速入门"></a></p> <ol start="2"><li>通过 jps 命令快速查找 java 进程，再次直接绑定 java -jar arthas-boot.jar pid 启动 arthas 工具 attach 到目标进程</li></ol> <h3 id="_10-2-3-dashboard-命令"><a href="#_10-2-3-dashboard-命令" class="header-anchor">#</a> 10.2.3 dashboard 命令</h3> <p>注意在 arthas 中，有 tab 键填充功能，所以比较好用。但是这个界面是实时刷新的，一般 5s 刷新一次，使用 q 键退出刷新（没有退出 arthasq）</p> <p><a data-fancybox="" title="dashboard" href="./image/arthas3.jpg"><img src="/assets/img/arthas3.3d516886.jpg" alt="dashboard"></a></p> <h3 id="_10-2-4-thread-命令"><a href="#_10-2-4-thread-命令" class="header-anchor">#</a> 10.2.4 thread 命令</h3> <p>这个命令和 jstack 很相似，但是功能更加强大，主要是查看当前 JVM 的线程堆栈信息<br>
同时可以结合使用 thread –b 来进行死锁的排查死锁。<br>
参数解释：<br>
-n 指定最忙的前 n 个线程并打印堆栈<br>
-b 找出阻塞当前线程的线程<br>
-i 指定 cpu 占比统计的采样间隔，单位为毫秒</p> <h4 id="_10-2-4-1-thread-b-找出阻塞当前线程的线程"><a href="#_10-2-4-1-thread-b-找出阻塞当前线程的线程" class="header-anchor">#</a> 10.2.4.1 thread –b 找出阻塞当前线程的线程</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code></code></pre> <div class="line-numbers-wrapper"></div></div><h4 id="_10-2-4-2-thread-i-1000-n-3-每过-1000-毫秒进行采样-显示最占-cpu-时间的前-3-个线程"><a href="#_10-2-4-2-thread-i-1000-n-3-每过-1000-毫秒进行采样-显示最占-cpu-时间的前-3-个线程" class="header-anchor">#</a> 10.2.4.2 thread -i 1000 -n 3 每过 1000 毫秒进行采样，显示最占 CPU 时间的前 3 个线程</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>arthas@10752<span class="token punctuation">]</span>$ thread -i <span class="token number">1000</span> -n <span class="token number">3</span> 
<span class="token string">&quot;arthas-command-execute&quot;</span> <span class="token assign-left variable">Id</span><span class="token operator">=</span><span class="token number">48</span> <span class="token assign-left variable">cpuUsage</span><span class="token operator">=</span><span class="token number">0.06</span>% <span class="token assign-left variable">deltaTime</span><span class="token operator">=</span>0ms <span class="token assign-left variable">time</span><span class="token operator">=</span>1208ms RUNNABLE
    at sun.management.ThreadImpl.dumpThreads0<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
    at sun.management.ThreadImpl.getThreadInfo<span class="token punctuation">(</span>ThreadImpl.java:448<span class="token punctuation">)</span>
    at com.taobao.arthas.core.command.monitor200.ThreadCommand.processTopBusyThreads<span class="token punctuation">(</span>ThreadCommand.java:206<span class="token punctuation">)</span>
    at com.taobao.arthas.core.command.monitor200.ThreadCommand.process<span class="token punctuation">(</span>ThreadCommand.java:122<span class="token punctuation">)</span>
    at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl.process<span class="token punctuation">(</span>AnnotatedCommandImpl.java:82<span class="token punctuation">)</span>
    at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl.access<span class="token variable">$100</span><span class="token punctuation">(</span>AnnotatedCommandImpl.java:18<span class="token punctuation">)</span>
    at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl<span class="token variable">$ProcessHandler</span>.handle<span class="token punctuation">(</span>AnnotatedCommandImpl.java:111<span class="token punctuation">)</span>
    at com.taobao.arthas.core.shell.command.impl.AnnotatedCommandImpl<span class="token variable">$ProcessHandler</span>.handle<span class="token punctuation">(</span>AnnotatedCommandImpl.java:108<span class="token punctuation">)</span>
    at com.taobao.arthas.core.shell.system.impl.ProcessImpl<span class="token variable">$CommandProcessTask</span>.run<span class="token punctuation">(</span>ProcessImpl.java:385<span class="token punctuation">)</span>
    at java.util.concurrent.Executors<span class="token variable">$RunnableAdapter</span>.call<span class="token punctuation">(</span>Executors.java:511<span class="token punctuation">)</span>
    at java.util.concurrent.FutureTask.run<span class="token punctuation">(</span>FutureTask.java:266<span class="token punctuation">)</span>
    at java.util.concurrent.ScheduledThreadPoolExecutor<span class="token variable">$ScheduledFutureTask</span>.access<span class="token variable">$201</span><span class="token punctuation">(</span>ScheduledThreadPoolExecutor.java:180<span class="token punctuation">)</span>
    at java.util.concurrent.ScheduledThreadPoolExecutor<span class="token variable">$ScheduledFutureTask</span>.run<span class="token punctuation">(</span>ScheduledThreadPoolExecutor.java:293<span class="token punctuation">)</span>
    at java.util.concurrent.ThreadPoolExecutor.runWorker<span class="token punctuation">(</span>ThreadPoolExecutor.java:1149<span class="token punctuation">)</span>
    at java.util.concurrent.ThreadPoolExecutor<span class="token variable">$Worker</span>.run<span class="token punctuation">(</span>ThreadPoolExecutor.java:624<span class="token punctuation">)</span>
    at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:748<span class="token punctuation">)</span>


<span class="token string">&quot;C1 CompilerThread1&quot;</span> <span class="token punctuation">[</span>Internal<span class="token punctuation">]</span> <span class="token assign-left variable">cpuUsage</span><span class="token operator">=</span><span class="token number">0.06</span>% <span class="token assign-left variable">deltaTime</span><span class="token operator">=</span>0ms <span class="token assign-left variable">time</span><span class="token operator">=</span>51787ms


<span class="token string">&quot;C2 CompilerThread0&quot;</span> <span class="token punctuation">[</span>Internal<span class="token punctuation">]</span> <span class="token assign-left variable">cpuUsage</span><span class="token operator">=</span><span class="token number">0.06</span>% <span class="token assign-left variable">deltaTime</span><span class="token operator">=</span>0ms <span class="token assign-left variable">time</span><span class="token operator">=</span>87061ms
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="_10-2-4-3-thread-state-waiting-查看处于等待状态的线程"><a href="#_10-2-4-3-thread-state-waiting-查看处于等待状态的线程" class="header-anchor">#</a> 10.2.4.3 thread --state WAITING 查看处于等待状态的线程</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>arthas@10752<span class="token punctuation">]</span>$ thread --state WAITING
Threads Total: <span class="token number">36</span>, NEW: <span class="token number">0</span>, RUNNABLE: <span class="token number">12</span>, BLOCKED: <span class="token number">0</span>, WAITING: <span class="token number">16</span>, TIMED_WAITING: <span class="token number">8</span>, TERMINATED: <span class="token number">0</span>                                                                                                                                                
ID        NAME                                                        GROUP                         PRIORITY             STATE               %CPU                DELTA_TIME          TIME                INTERRUPTED         DAEMON              
<span class="token number">2</span>         Reference Handler                                           system                        <span class="token number">10</span>                   WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.026             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">3</span>         Finalizer                                                   system                        <span class="token number">8</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.027             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">37</span>        arthas-timer                                                system                        <span class="token number">9</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.000             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">45</span>        arthas-UserStat                                             system                        <span class="token number">9</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.001             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">12</span>        Druid-ConnectionPool-Create-671046933                       main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.162             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">16</span>        Catalina-utility-2                                          main                          <span class="token number">1</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">6</span>:1.690             <span class="token boolean">false</span>               <span class="token boolean">false</span>               
<span class="token number">21</span>        http-nio-8899-exec-1                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.775             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">22</span>        http-nio-8899-exec-2                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.739             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">23</span>        http-nio-8899-exec-3                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.729             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">24</span>        http-nio-8899-exec-4                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.638             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">25</span>        http-nio-8899-exec-5                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.573             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">26</span>        http-nio-8899-exec-6                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.520             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">27</span>        http-nio-8899-exec-7                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.541             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">28</span>        http-nio-8899-exec-8                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.721             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">29</span>        http-nio-8899-exec-9                                        main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.705             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
<span class="token number">30</span>        http-nio-8899-exec-10                                       main                          <span class="token number">5</span>                    WAITING             <span class="token number">0.0</span>                 <span class="token number">0.000</span>               <span class="token number">0</span>:0.573             <span class="token boolean">false</span>               <span class="token boolean">true</span>                
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_10-2-5-jvm-命令"><a href="#_10-2-5-jvm-命令" class="header-anchor">#</a> 10.2.5 jvm 命令</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>arthas@10752<span class="token punctuation">]</span>$ jvm
 RUNTIME                                                                                                                                                                                                                                         
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 MACHINE-NAME                                                         <span class="token number">10752</span>@TXYUN-NO1                                                                                                                                                            
 JVM-START-TIME                                                       <span class="token number">2021</span>-04-20 <span class="token number">21</span>:21:45                                                                                                                                                        
 MANAGEMENT-SPEC-VERSION                                              <span class="token number">1.2</span>                                                                                                                                                                        
 SPEC-NAME                                                            Java Virtual Machine Specification                                                                                                                                         
 SPEC-VENDOR                                                          Oracle Corporation                                                                                                                                                         
 SPEC-VERSION                                                         <span class="token number">1.8</span>                                                                                                                                                                        
 VM-NAME                                                              OpenJDK <span class="token number">64</span>-Bit Server VM                                                                                                                                                   
 VM-VENDOR                                                            Oracle Corporation                                                                                                                                                         
 VM-VERSION                                                           <span class="token number">25.262</span>-b10                                                                                                                                                                 
 INPUT-ARGUMENTS                                                      <span class="token punctuation">[</span><span class="token punctuation">]</span>                                                                                                                                                                         
 CLASS-<span class="token environment constant">PATH</span>                                                           ./blog.jar                                                                                                                                                                 
 BOOT-CLASS-<span class="token environment constant">PATH</span>                                                      /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre/lib/resources.jar:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre/lib/rt.jar:/usr/lib/jv 
                                                                      m/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre/lib/jsse.jar:/usr/lib/jvm/java-1 
                                                                      .8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre/lib/jce.jar:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre/lib/charsets.jar:/usr/lib/jvm/java-1.8.0-openjd 
                                                                      k-1.8.0.262.b10-0.el7_8.x86_64/jre/lib/jfr.jar:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el7_8.x86_64/jre/classes                                                    
 LIBRARY-<span class="token environment constant">PATH</span>                                                         /usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib                                                                                                               
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_10-2-6-jad-命令"><a href="#_10-2-6-jad-命令" class="header-anchor">#</a> 10.2.6 jad 命令</h3> <p><strong>反编译指定已加载类的源码</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">[</span>arthas<span class="token annotation punctuation">@10752</span><span class="token punctuation">]</span>$ jad <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>controller<span class="token punctuation">.</span></span>MusicController</span>

<span class="token class-name">ClassLoader</span><span class="token operator">:</span>                                                                                                                                                                                                                                     
<span class="token operator">+</span><span class="token operator">-</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>loader<span class="token punctuation">.</span></span>LaunchedURLClassLoader</span><span class="token annotation punctuation">@1d56ce6a</span>                                                                                                                                                                                
  <span class="token operator">+</span><span class="token operator">-</span><span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Launcher</span>$<span class="token class-name">AppClassLoader</span><span class="token annotation punctuation">@33909752</span>                                                                                                                                                                                                    
    <span class="token operator">+</span><span class="token operator">-</span><span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Launcher</span>$<span class="token class-name">ExtClassLoader</span><span class="token annotation punctuation">@3e27ba32</span>                                                                                                                                                                                                  

<span class="token class-name">Location</span><span class="token operator">:</span>                                                                                                                                                                                                                                        
file<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>java<span class="token operator">/</span>blog<span class="token punctuation">.</span>jar<span class="token operator">!</span><span class="token operator">/</span>BOOT<span class="token operator">-</span>INF<span class="token operator">/</span>classes<span class="token operator">!</span><span class="token operator">/</span>                                                                                                                                                                                                      

        <span class="token comment">/*
         * Decompiled with CFR.
         * 
         * Could not load the following classes:
         *  com.tqk.blog.enums.ResultEnum
         *  com.tqk.blog.pojo.BlMusic
         *  com.tqk.blog.service.MusicService
         *  com.tqk.blog.utils.Page
         *  com.tqk.blog.utils.Result
         *  com.tqk.blog.utils.StringUtils
         *  org.springframework.beans.factory.annotation.Autowired
         *  org.springframework.web.bind.annotation.PathVariable
         *  org.springframework.web.bind.annotation.RequestBody
         *  org.springframework.web.bind.annotation.RequestMapping
         *  org.springframework.web.bind.annotation.RequestMethod
         *  org.springframework.web.bind.annotation.RestController
         */</span>
        <span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>
        
        <span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>enums<span class="token punctuation">.</span></span><span class="token class-name">ResultEnum</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">BlMusic</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">MusicService</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Page</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Result</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>tqk<span class="token punctuation">.</span>blog<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestBody</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMethod</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>
        
        <span class="token annotation punctuation">@RestController</span>
        <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/music&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MusicController</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Autowired</span>
            <span class="token keyword">private</span> <span class="token class-name">MusicService</span> musicService<span class="token punctuation">;</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/enable/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>PUT<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">enable</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/* 81*/</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">enableById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token string">&quot;启用成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/disable/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>PUT<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">disable</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/* 92*/</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">disableById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token string">&quot;弃用成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/getByPage&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span><span class="token punctuation">&lt;</span><span class="token class-name">BlMusic</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BlMusic</span><span class="token punctuation">&gt;</span></span> page<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sortColumns<span class="token punctuation">;</span>
                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sortList<span class="token punctuation">;</span>
                <span class="token class-name">String</span> sortColumn <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getSortColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span><span class="token punctuation">)</span>sortColumn<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>sortList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>sortColumns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;artist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;created_time&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>sortColumn<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token class-name">ResultEnum</span><span class="token punctuation">.</span>PARAMS_ERROR<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;排序参数不合法！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
<span class="token comment">/*112*/</span>         page <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">getByPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/getList&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">BlMusic</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/*122*/</span>         <span class="token class-name">List</span> musicList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>musicList<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/get/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BlMusic</span><span class="token punctuation">&gt;</span></span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/* 59*/</span>         <span class="token class-name">BlMusic</span> music <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>music<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>PUT<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BlMusic</span> music<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/* 48*/</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>music<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token string">&quot;修改成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/delete/{id}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>DELETE<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/* 70*/</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token string">&quot;删除成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        
            <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token punctuation">{</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BlMusic</span> music<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/* 35*/</span>         <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;添加成功！&quot;</span><span class="token punctuation">;</span>
                <span class="token class-name">Result</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 37*/</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>musicService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>music<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 38*/</span>         <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

<span class="token class-name">Affect</span><span class="token punctuation">(</span>row<span class="token operator">-</span>cnt<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">)</span> cost in <span class="token number">2012</span> ms<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br></div></div><h3 id="_10-2-7-trace-命令"><a href="#_10-2-7-trace-命令" class="header-anchor">#</a> 10.2.7 trace 命令</h3> <p><strong>使用 trace 命令可以跟踪统计方法耗时</strong></p> <p>继续跟踪耗时高的方法，然后再次访问 比如使用一个 Springboot 项目（当然，不想 Springboot 的话，你也可以直接在 UserController 里 main 方法启动）控制层 getUser 方法调用 了 userService.get(uid);，这个方法中分别进行 check、service、redis、mysql 等操作操作。就可以根据这个命令跟踪出来哪里的耗时最长。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>arthas@10752<span class="token punctuation">]</span>$ trace com.tqk.blog.controller.MusicController getList
Press Q or Ctrl+C to abort.
Affect<span class="token punctuation">(</span>class count: <span class="token number">2</span> , method count: <span class="token number">2</span><span class="token punctuation">)</span> cost <span class="token keyword">in</span> <span class="token number">139</span> ms, listenerId: <span class="token number">5</span>
<span class="token variable"><span class="token variable">`</span>---ts<span class="token operator">=</span><span class="token number">2021</span>-07-27 00:55:02<span class="token punctuation">;</span><span class="token assign-left variable">thread_name</span><span class="token operator">=</span>http-nio-8899-exec-3<span class="token punctuation">;</span><span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token number">17</span><span class="token punctuation">;</span><span class="token assign-left variable">is_daemon</span><span class="token operator">=</span>true<span class="token punctuation">;</span><span class="token assign-left variable">priority</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token assign-left variable">TCCL</span><span class="token operator">=</span>org.springframework.boot.web.embedded.tomcat.TomcatEmbeddedWebappClassLoader@69ee81fc
    <span class="token variable">`</span></span>---<span class="token punctuation">[</span><span class="token number">139</span>.853962ms<span class="token punctuation">]</span> com.tqk.blog.controller.MusicController<span class="token variable">$$</span>EnhancerBySpringCGLIB<span class="token variable">$$</span>68c0ba:getList<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token variable"><span class="token variable">`</span>---<span class="token punctuation">[</span><span class="token number">139</span>.377082ms<span class="token punctuation">]</span> org.springframework.cglib.proxy.MethodInterceptor:intercept<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token variable">`</span></span>---<span class="token punctuation">[</span><span class="token number">20</span>.997931ms<span class="token punctuation">]</span> com.tqk.blog.controller.MusicController:getList<span class="token punctuation">(</span><span class="token punctuation">)</span>
                +---<span class="token punctuation">[</span><span class="token number">20</span>.843028ms<span class="token punctuation">]</span> com.tqk.blog.service.MusicService:getList<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#122</span>
                `---<span class="token punctuation">[</span><span class="token number">0</span>.019634ms<span class="token punctuation">]</span> com.tqk.blog.utils.Result:<span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_10-2-8-monitor-命令"><a href="#_10-2-8-monitor-命令" class="header-anchor">#</a> 10.2.8 monitor 命令</h3> <p>每 5 秒统计一次 com.tqk.blog.controller.MusicController 类的 getList 方法执行情况<br> <font color="red"><strong>monitor -c 5 com.tqk.blog.controller.MusicController getList</strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>arthas@10752<span class="token punctuation">]</span>$ monitor -c <span class="token number">5</span> com.tqk.blog.controller.MusicController getList
Press Q or Ctrl+C to abort.
Affect<span class="token punctuation">(</span>class count: <span class="token number">2</span> , method count: <span class="token number">2</span><span class="token punctuation">)</span> cost <span class="token keyword">in</span> <span class="token number">188</span> ms, listenerId: <span class="token number">6</span>
 timestamp                            class                                                   method                                                 total              success           fail               avg-rt<span class="token punctuation">(</span>ms<span class="token punctuation">)</span>        fail-rate         
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 <span class="token number">2021</span>-07-27 01:34:12                  com.tqk.blog.controller.MusicController<span class="token variable">$$</span>EnhancerBySpr  getList                                                <span class="token number">1</span>                  <span class="token number">1</span>                 <span class="token number">0</span>                  <span class="token number">75.54</span>             <span class="token number">0.00</span>%             
                                      ingCGLIB<span class="token variable">$$</span>68c0ba                                                                                                                                                                                           
 <span class="token number">2021</span>-07-27 01:34:12                  com.tqk.blog.controller.MusicController                 getList                                                <span class="token number">1</span>                  <span class="token number">1</span>                 <span class="token number">0</span>                  <span class="token number">25.47</span>             <span class="token number">0.00</span>%             

 timestamp                            class                                                   method                                                 total              success           fail               avg-rt<span class="token punctuation">(</span>ms<span class="token punctuation">)</span>        fail-rate         
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 <span class="token number">2021</span>-07-27 01:34:17                  com.tqk.blog.controller.MusicController<span class="token variable">$$</span>EnhancerBySpr  getList                                                <span class="token number">0</span>                  <span class="token number">0</span>                 <span class="token number">0</span>                  <span class="token number">0.00</span>              <span class="token number">0.00</span>%             
                                      ingCGLIB<span class="token variable">$$</span>68c0ba                                                                                                                                                                                           
 <span class="token number">2021</span>-07-27 01:34:17                  com.tqk.blog.controller.MusicController                 getList                                                <span class="token number">0</span>                  <span class="token number">0</span>                 <span class="token number">0</span>                  <span class="token number">0.00</span>              <span class="token number">0.00</span>%             
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_10-2-9-watch-命令"><a href="#_10-2-9-watch-命令" class="header-anchor">#</a> 10.2.9 watch 命令</h3> <p><strong>观察方法的入参出参信息 # 查看入参和出参</strong><br> <font color="red"><strong>watch com.tqk.blog.controller.MusicController getList '{params,returnObj}'</strong></font><br> <font color="red"><strong>watch com.tqk.blog.controller.MusicController getList '{params[0],returnObj}'</strong></font><br> <font color="red"><strong>watch com.tqk.blog.controller.MusicController getList '{returnObj}'</strong></font></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>arthas@10752<span class="token punctuation">]</span>$ <span class="token function">watch</span> com.tqk.blog.controller.MusicController getList <span class="token string">'{returnObj}'</span>
Press Q or Ctrl+C to abort.
Affect<span class="token punctuation">(</span>class count: <span class="token number">2</span> , method count: <span class="token number">2</span><span class="token punctuation">)</span> cost <span class="token keyword">in</span> <span class="token number">171</span> ms, listenerId: <span class="token number">8</span>
<span class="token assign-left variable">method</span><span class="token operator">=</span>com.tqk.blog.controller.MusicController.getList <span class="token assign-left variable">location</span><span class="token operator">=</span>AtExit
<span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">2021</span>-07-27 01:39:14<span class="token punctuation">;</span> <span class="token punctuation">[</span>cost<span class="token operator">=</span><span class="token number">11</span>.34216ms<span class="token punctuation">]</span> <span class="token assign-left variable">result</span><span class="token operator">=</span>@ArrayList<span class="token punctuation">[</span>
    @Result<span class="token punctuation">[</span>Result<span class="token punctuation">(</span>code<span class="token operator">=</span><span class="token number">20000</span>, <span class="token assign-left variable">msg</span><span class="token operator">=</span>操作成功！, <span class="token assign-left variable">data</span><span class="token operator">=</span><span class="token punctuation">[</span>BlMusic<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>see you again, <span class="token assign-left variable">artist</span><span class="token operator">=</span>see you again, <span class="token assign-left variable">url</span><span class="token operator">=</span>http://49.232.21.151/group1/M00/00/00/rBUAEGBXaNaAKmq6AItuDEehl8w738.mp3, <span class="token assign-left variable">cover</span><span class="token operator">=</span>http://49.232.21.151/group1/M00/00/00/rBUAEGBXaM6AZFZHAABYayAtqWU518.jpg, <span class="token assign-left variable">createdTime</span><span class="token operator">=</span>Sun Mar <span class="token number">21</span> <span class="token number">23</span>:40:19 CST <span class="token number">2021</span>, <span class="token assign-left variable">enable</span><span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">lrc</span><span class="token operator">=</span><span class="token punctuation">[</span>00:00.000<span class="token punctuation">]</span> 作词 <span class="token builtin class-name">:</span> Andrew Cedar/Justin Scott Franks/Charlie Otto Jr. Puth/Cameron Jibril Thomaz
<span class="token punctuation">[</span>00:01.000<span class="token punctuation">]</span> 作曲 <span class="token builtin class-name">:</span> Andrew Cedar/Justin Scott Franks/Charlie Otto Jr. Puth/Cameron Jibril Thomaz
<span class="token punctuation">[</span>00:11.210<span class="token punctuation">]</span>It<span class="token string">'s been a long day without you my friend
[00:17.310]And I'</span>ll tell you all about it when I see you again
<span class="token punctuation">[</span>00:23.750<span class="token punctuation">]</span>We<span class="token string">'ve come a long way from where we began
[00:29.250]Oh I'</span>ll tell you all about it when I see you again
<span class="token punctuation">[</span>00:35.700<span class="token punctuation">]</span>When I see you again
<span class="token punctuation">[</span>00:40.200<span class="token punctuation">]</span>Damn <span class="token function">who</span> knew all the planes we flew
<span class="token punctuation">[</span>00:43.550<span class="token punctuation">]</span>Good things we<span class="token string">'ve been through
[00:44.850]That I'</span>ll be standing right here
<span class="token punctuation">[</span>00:46.950<span class="token punctuation">]</span>Talking to you about another path
<span class="token punctuation">[</span>00:47.900<span class="token punctuation">]</span>I know we loved to hit the road and laugh
<span class="token punctuation">[</span>00:51.800<span class="token punctuation">]</span>But something told me that it wouldn<span class="token string">'t last
[00:53.900]Had to switch up look at things different see the bigger picture
[00:57.750]Those were the days hard work forever pays
[01:00.650]Now I see you in a better place
[01:05.700]How could we not talk about family when family'</span>s all that we got?
<span class="token punctuation">[</span>01:09.200<span class="token punctuation">]</span>Everything I went through you were standing there by my side
<span class="token punctuation">[</span>01:11.950<span class="token punctuation">]</span>And now you gon<span class="token string">' be with me for the last ride
[01:14.600]It'</span>s been a long day without you my friend
<span class="token punctuation">[</span>01:20.900<span class="token punctuation">]</span>And I<span class="token string">'ll tell you all about it when I see you again
[01:27.100]We'</span>ve come a long way from where we began
<span class="token punctuation">[</span>01:32.950<span class="token punctuation">]</span>Oh I'll tell you all about it when I see you again
<span class="token punctuation">[</span>01:38.700<span class="token punctuation">]</span>When I see you again
<span class="token punctuation">[</span>01:42.150<span class="token punctuation">]</span>Ohh~~~
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_10-2-10-命令总结"><a href="#_10-2-10-命令总结" class="header-anchor">#</a> 10.2.10 命令总结</h3> <p><a data-fancybox="" title="命令总结" href="./image/arthas.jpg"><img src="/assets/img/arthas.5598344e.jpg" alt="命令总结"></a></p> <h2 id="_10-3-动态追踪技术底层分析"><a href="#_10-3-动态追踪技术底层分析" class="header-anchor">#</a> 10.3 动态追踪技术底层分析</h2> <p>动态追踪技术是一个可以不用重启线上 java 项目来进行问题排查的技术，比如前面讲的 Arthas 就属于一种动态追踪的工具。
它里面提供的 monitor 还有 watch 等命令就是动态的追踪技术。</p> <p>当然我们学技术要知其然还要知其所以然，Arthas工具的基础，就是<font color="red"><strong>Java Agent技术</strong></font>，可以利用它来构建一个附加的代理程序，用来协助检测性能，还可以替换一些现有功能，甚至JDK的一些类我们也能修改，有点像JVM级别的AOP功能。</p> <h3 id="_10-3-1-java-agent-技术"><a href="#_10-3-1-java-agent-技术" class="header-anchor">#</a> 10.3.1 Java Agent 技术</h3> <p>既然作为 JVM 的 AOP，就必须要有 AOP 的功能，所以 Java Agent 提供了两个类似于 AOP 的方法</p> <div class="custom-block tip"><p class="custom-block-title">Java Agent的AOP的方法</p> <p>◆　一个方法叫做 premain 方法，可以在 main 运行之前的进行一些操作(Java 入口是一个 main 方法) 　  　
◆　一个是 agentmain 方法，是控制类运行时的行为（Arthas 使用的就是这种）,但在一个 JVM 中，只会调用一个</p></div> <h2 id="_10-4-gcviewer可视化分析工具"><a href="#_10-4-gcviewer可视化分析工具" class="header-anchor">#</a> 10.4 GCViewer可视化分析工具</h2> <h2 id="_10-5-prometheus监控工具"><a href="#_10-5-prometheus监控工具" class="header-anchor">#</a> 10.5 Prometheus监控工具</h2> <h2 id="_10-6-grafana监控工具"><a href="#_10-6-grafana监控工具" class="header-anchor">#</a> 10.6 Grafana监控工具</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/base/JVM/Java语法糖及实现-9.html" class="prev">
        9.Java语法糖及实现
      </a></span> <span class="next"><a href="/base/JVM/JVM 性能调优-b.html">
        11.JVM性能调优（一）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.657caddf.js" defer></script><script src="/assets/js/2.99bf64c9.js" defer></script><script src="/assets/js/49.1e47ab60.js" defer></script>
  </body>
</html>
