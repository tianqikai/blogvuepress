(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1479:function(t,a,s){"use strict";s.r(a);var e=s(26),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_2-jemeter模拟高并发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-jemeter模拟高并发"}},[t._v("#")]),t._v(" 2. Jemeter模拟高并发")]),t._v(" "),e("h2",{attrs:{id:"_2-1-jemeter使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-jemeter使用"}},[t._v("#")]),t._v(" 2.1 Jemeter使用")]),t._v(" "),e("p",[t._v("官网：https://jmeter.apache.org/ 本文安装 Windows 版本。")]),t._v(" "),e("h3",{attrs:{id:"_2-1-1-jemeter汉化使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-jemeter汉化使用"}},[t._v("#")]),t._v(" 2.1.1 Jemeter汉化使用")]),t._v(" "),e("p",[t._v("进入 bin 目录编辑 jmeter.properties 文件，修改 37 行和 1085 行两处代码（不同的电脑可能行数不一致，不过上下差距不大）")]),t._v(" "),e("div",{staticClass:"language-yml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#language=en")]),t._v("\nlanguage=zh_CN\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#sampleresult.default.encoding=ISO-8859-1")]),t._v("\nsampleresult.default.encoding=UTF"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("运行 bin/jmeter.bat 文件，界面显示如下。大家可以通过 "),e("strong",[t._v("选项 → 外观")]),t._v(" 选择自己喜欢的界面风格。")]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/JMeter01.jpg"}},[e("img",{attrs:{src:s(343),alt:"Jemeter使用"}})])]),t._v(" "),e("h3",{attrs:{id:"_2-1-2-基本使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-基本使用"}},[t._v("#")]),t._v(" 2.1.2 基本使用")]),t._v(" "),e("h4",{attrs:{id:"添加线程组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加线程组"}},[t._v("#")]),t._v(" 添加线程组")]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/JMeter02.jpg"}},[e("img",{attrs:{src:s(829),alt:"Jemeter使用"}})])]),t._v(" "),e("h4",{attrs:{id:"添加-http-请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加-http-请求"}},[t._v("#")]),t._v(" 添加 HTTP 请求")]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/JMeter03.jpg"}},[e("img",{attrs:{src:s(830),alt:"Jemeter使用"}})])]),t._v(" "),e("h4",{attrs:{id:"添加结果数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加结果数"}},[t._v("#")]),t._v(" 添加结果数")]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/JMeter04.jpg"}},[e("img",{attrs:{src:s(831),alt:"Jemeter使用"}})])]),t._v(" "),e("h4",{attrs:{id:"执行请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行请求"}},[t._v("#")]),t._v(" 执行请求")]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/JMeter05.jpg"}},[e("img",{attrs:{src:s(832),alt:"Jemeter使用"}})])]),t._v(" "),e("h2",{attrs:{id:"_2-2-高并发测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-高并发测试"}},[t._v("#")]),t._v(" 2.2 高并发测试")]),t._v(" "),e("h3",{attrs:{id:"_2-2-1-模拟高并发场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-模拟高并发场景"}},[t._v("#")]),t._v(" 2.2.1 模拟高并发场景")]),t._v(" "),e("h4",{attrs:{id:"服务提供者接口添加-thread-sleep-2000-模拟服务处理时长。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务提供者接口添加-thread-sleep-2000-模拟服务处理时长。"}},[t._v("#")]),t._v(" 服务提供者接口添加 Thread.sleep(2000) ，模拟服务处理时长。")]),t._v(" "),e("div",{staticClass:"language-java line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-java"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 查询商品列表\n     *\n     * @return\n     */")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/list"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),e("span",{pre:!0,attrs:{class:"token generics"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Product")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectProductList")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//todo 模拟业务超时")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000L")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" productService"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectProductList")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("h4",{attrs:{id:"服务消费者降低-tomcat-最大线程数方便模拟高并发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务消费者降低-tomcat-最大线程数方便模拟高并发"}},[t._v("#")]),t._v(" 服务消费者降低 Tomcat 最大线程数方便模拟高并发")]),t._v(" "),e("div",{staticClass:"language-yml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tomcat")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   max"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("threads")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 降低最大线程数方便模拟高并发")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h3",{attrs:{id:"_2-2-2-jemeter测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-jemeter测试"}},[t._v("#")]),t._v(" 2.2.2 Jemeter测试")]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/JMeter06.jpg"}},[e("img",{attrs:{src:s(833),alt:"Jemeter使用"}})])]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/JMeter01.jpg"}},[e("img",{attrs:{src:s(343),alt:"Jemeter使用"}})])]),t._v(" "),e("p",[t._v("通过 JMeter 开启 50 线程循环 50 次请求服务消费者 http://localhost:9090/order/product/list")]),t._v(" "),e("p",[t._v("然后postman再次请求 http://192.168.0.105:9090/order/1/product/list 统计耗时如下。请求耗时： 9.12s")]),t._v(" "),e("p",[e("a",{attrs:{"data-fancybox":"",title:" Jemeter使用",href:"./image/Postman.jpg"}},[e("img",{attrs:{src:s(834),alt:"Jemeter使用"}})])])])}),[],!1,null,null,null);a.default=r.exports},343:function(t,a,s){t.exports=s.p+"assets/img/JMeter01.e56db0a4.jpg"},829:function(t,a,s){t.exports=s.p+"assets/img/JMeter02.3e2b7c0c.jpg"},830:function(t,a,s){t.exports=s.p+"assets/img/JMeter03.760b1d79.jpg"},831:function(t,a,s){t.exports=s.p+"assets/img/JMeter04.ab1af700.jpg"},832:function(t,a,s){t.exports=s.p+"assets/img/JMeter05.503dd245.jpg"},833:function(t,a,s){t.exports=s.p+"assets/img/JMeter06.8f99232e.jpg"},834:function(t,a,s){t.exports=s.p+"assets/img/Postman.cd44c332.jpg"}}]);