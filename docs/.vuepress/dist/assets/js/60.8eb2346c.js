(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{672:function(s,a,t){s.exports=t.p+"assets/img/zookeeper10.a59eede2.jpg"},794:function(s,a,t){"use strict";t.r(a);var r=t(26),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"二、zookeeper安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#二、zookeeper安装"}},[s._v("#")]),s._v(" 二、Zookeeper安装")]),s._v(" "),r("h2",{attrs:{id:"_2-1-zookeeper单机版安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-zookeeper单机版安装"}},[s._v("#")]),s._v(" 2.1 zookeeper单机版安装")]),s._v(" "),r("p",[r("font",{attrs:{color:"red",size:"4"}},[r("strong",[s._v("1. 安装前准备")])]),r("br"),s._v("\n（1）安装 Jdk"),r("br"),s._v("\n（2）上传zookeeper 安装包到 Linux 系统下(apache-zookeeper-3.6.3-bin.tar.gz)"),r("br"),s._v("\n（3）解压到指定目录")],1),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("tar "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zxvf apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("C "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[r("font",{attrs:{color:"red",size:"4"}},[r("strong",[s._v("2．配置修改")])]),r("br"),s._v("\n（1）将/usr/local/zookeeper/apache-zookeeper-3.6.3-bin/conf 这个路径下的 zoo_sample.cfg 修改为 zoo.cfg；")],1),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("mv zoo_sample"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg  zoo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("（2）打开 zoo.cfg 文件，修改 dataDir 路径："),r("br"),s._v("\nvim zoo.cfg")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("dataDir"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkData\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("（3）在/usr/local/zookeeper/apache-zookeeper-3.6.3-bin/这个目录上创建 zkData 文件夹")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v(" mkdir zkData\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[r("font",{attrs:{color:"red",size:"4"}},[r("strong",[s._v("3．操作 Zookeeper")])]),r("br"),s._v("\n（1）启动 Zookeeper  -- sh zkServer.sh start")],1),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[root"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sh zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java\nZooKeeper JMX enabled by "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" config"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\nStarting zookeeper "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" STARTED\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("p",[s._v("（2）查看进程是否启动  --jps")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[root"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" jps\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10752")]),s._v(" blog"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("30913")]),s._v(" Jps\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("30726")]),s._v(" QuorumPeerMain\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("p",[s._v("（3）查看状态：  --sh zkServer.sh status")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[root"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sh zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java\nZooKeeper JMX enabled by "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" config"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\nClient port found"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" Client address"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" Client SSL"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nMode"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" standalone\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[s._v("（4）启动客户端：\n--sh zkCli.sh\n--./zkCli.sh -server 本机ip:zookeeper端口号")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v(" sh zkCli"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server localhost"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2185")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("（5）退出客户端：  --quit")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("] quit\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("（6）停止 Zookeeper  --sh zkServer.sh stop")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[root"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sh zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java\nZooKeeper JMX enabled by "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" config"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\nStopping zookeeper "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" STOPPED\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("h2",{attrs:{id:"_2-2-配置参数解读"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置参数解读"}},[s._v("#")]),s._v(" 2.2 配置参数解读")]),s._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[s._v("Zookeeper中的配置文件zoo.cfg中参数含义解读如下：")]),s._v(" "),r("p",[r("font",{attrs:{color:"red"}},[r("strong",[s._v("1．tickTime =2000：通信心跳数，Zookeeper 服务器与客户端心跳时间，单位毫秒 ")])]),r("br"),s._v("\nZookeeper使用的基本时间，服务器之间或客户端与服务器之间维持心跳的时间间隔，\n也就是每个tickTime时间就会发送一个心跳，时间单位为毫秒。\n它用于心跳机制，并且设置最小的session超时时间为两倍心跳时间。(session的最小超时时间是2*tickTime)"),r("br"),s._v(" "),r("font",{attrs:{color:"red"}},[r("strong",[s._v("2．initLimit =10：LF 初始通信时限")])]),r("br"),s._v("\n集群中的Follower跟随者服务器与Leader领导者服务器之间初始连接时能容忍的最多心\n跳数（tickTime的数量），用它来限定集群中的Zookeeper服务器连接到Leader的时限。"),r("br"),s._v(" "),r("font",{attrs:{color:"red"}},[r("strong",[s._v("3．syncLimit =5：LF 同步通信时限")])]),r("br"),s._v("\n集群中Leader与Follower之间的最大响应时间单位，假如响应超过syncLimit *\ntickTime，Leader认为Follwer死掉，从服务器列表中删除Follwer。"),r("br"),s._v(" "),r("font",{attrs:{color:"red"}},[r("strong",[s._v("4．dataDir：数据文件目录+数据持久化路径")])]),r("br"),s._v("\n主要用于保存 Zookeeper 中的数据。"),r("br"),s._v(" "),r("font",{attrs:{color:"red"}},[r("strong",[s._v("5．clientPort =2181：客户端连接端口")])]),r("br"),s._v("\n监听客户端连接的端口。")],1)]),s._v(" "),r("h2",{attrs:{id:"_2-3-zookeeper分布式安装"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-zookeeper分布式安装"}},[s._v("#")]),s._v(" 2.3 zookeeper分布式安装")]),s._v(" "),r("h3",{attrs:{id:"_2-3-1、集群的规划"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1、集群的规划"}},[s._v("#")]),s._v(" 2.3.1、集群的规划")]),s._v(" "),r("p",[s._v("机器编号\tIp 地址\t端口"),r("br"),s._v("\nZk-1\t49.232.21.151\t2181"),r("br"),s._v("\nZk-2\t49.232.21.151\t2182\nZk-3\t49.232.21.151\t2183")]),s._v(" "),r("h3",{attrs:{id:"_2-3-2、创建-usr-local-zk-cluster"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2、创建-usr-local-zk-cluster"}},[s._v("#")]),s._v(" 2.3.2、创建/usr/local/zk-cluster")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("mkdir "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"_2-3-3、在usr-local-zk-cluster里面复制三个zk"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3、在usr-local-zk-cluster里面复制三个zk"}},[s._v("#")]),s._v(" 2.3.3、在usr/local/zk-cluster里面复制三个zk")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("cp "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ncp "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\ncp "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("h3",{attrs:{id:"_2-3-4、创建log-data目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-4、创建log-data目录"}},[s._v("#")]),s._v(" 2.3.4、创建log/data目录")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("mkdir  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\nmkdir  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\nmkdir  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n\nmkdir  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\nmkdir  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\nmkdir  "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("h3",{attrs:{id:"_2-3-5、创建data-myid文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-5、创建data-myid文件"}},[s._v("#")]),s._v(" 2.3.5、创建data/myid文件")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("touch "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n\ntouch "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n\ntouch "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("h3",{attrs:{id:"_2-3-6、分别修改data-myid文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-6、分别修改data-myid文件"}},[s._v("#")]),s._v(" 2.3.6、分别修改data/myid文件")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("vim "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nvim "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nvim "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("h3",{attrs:{id:"_2-3-5、分别修改conf-zoo-cfg文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-5、分别修改conf-zoo-cfg文件"}},[s._v("#")]),s._v(" 2.3.5、分别修改conf/zoo.cfg文件")]),s._v(" "),r("ol",[r("li",[s._v("conf目录下的zoo_sample.cfg为zoo.cfg")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("mv zoo_sample"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg  zoo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ol",{attrs:{start:"2"}},[r("li",[s._v("打开zoo.cfg文件  -- vim zoo.cfg\n修改数据存储路径配置")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("dataDir"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\ndataLogDir"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("增加如下配置")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("quorumListenOnAllIPs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\nserver"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2186")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3886")]),s._v("\nserver"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2189")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3889")]),s._v("\nserver"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2187")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3887")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("p",[r("font",{attrs:{color:"red"}},[r("strong",[s._v("三台zookeeper分别进行修改")])])],1),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" milliseconds "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("each")]),s._v(" tick\ntickTime"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" ticks that the initial\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" synchronization phase can take\ninitLimit"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" ticks that can pass between\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sending a request "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" getting an acknowledgement\nsyncLimit"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" the directory where the snapshot "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" stored"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" use "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" storage"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp here "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" just\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" example sakes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\ndataDir"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\ndataLogDir"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" the port at which the clients will connect\nclientPort"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" the maximum number "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" client connections"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" increase this "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you need "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" handle more clients\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("maxClientCnxns"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nquorumListenOnAllIPs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\nserver"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2186")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3886")]),s._v("\nserver"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2189")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3889")]),s._v("\nserver"),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2187")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3887")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" Be sure "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" read the maintenance section "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" the\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" administrator guide before turning "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" autopurge"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" http"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("doc"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("current"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeperAdmin"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("sc_maintenance\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" snapshots "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" retain "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" dataDir\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("autopurge"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("snapRetainCount"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" Purge task interval "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hours\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" disable auto purge feature\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("autopurge"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("purgeInterval"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br"),r("span",{staticClass:"line-number"},[s._v("33")]),r("br"),r("span",{staticClass:"line-number"},[s._v("34")]),r("br"),r("span",{staticClass:"line-number"},[s._v("35")]),r("br"),r("span",{staticClass:"line-number"},[s._v("36")]),r("br"),r("span",{staticClass:"line-number"},[s._v("37")]),r("br")])]),r("ol",{attrs:{start:"3"}},[r("li",[s._v("同步zoo.cfg配置文件")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v(" xsync zoo"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ol",{attrs:{start:"4"}},[r("li",[s._v("配置参数解读"),r("br"),s._v("\nserver.A=B:C:D。"),r("br"),s._v("\nA是一个数字，表示这个是第几号服务器；"),r("br"),s._v("\n集群模式下配置一个文件myid，这个文件在dataDir目录下，这个文件里面有一个数据就是A的值，Zookeeper启动时读取此文件，拿到里面的数据与zoo.cfg里面的配置信息比较从而判断到底是哪个server。"),r("br"),s._v("\nB是这个服务器的ip地址；"),r("br"),s._v("\nC是这个服务器与集群中的Leader服务器交换信息的端口；"),r("br"),s._v("\nD是万一集群中的Leader服务器挂了，需要一个端口来重新进行选举，选出一个新的Leader，而这个端口就是用来执行选举时服务器相互通信的端口。")])]),s._v(" "),r("h3",{attrs:{id:"_2-3-6、启动测试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-6、启动测试"}},[s._v("#")]),s._v(" 2.3.6、启动测试")]),s._v(" "),r("p",[s._v("分别启动三台zookeeper服务器")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v(" sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("p",[s._v("分别查看三台zookeeper服务状态")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v(" sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("p",[s._v("分别停用三台zookeeper服务")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v(" sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("p",[s._v("到此我们集群搭建完成\n可以测试一下\n在zk1下面创建一个节点\n看看zk2和zk3下面有没有")]),s._v(" "),r("hr"),s._v(" "),r("p",[s._v("客户端连接zk1 zk2 zk3")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("  \n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2182")]),s._v("\n\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2183")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("h2",{attrs:{id:"_2-4-客户端命令行操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-客户端命令行操作"}},[s._v("#")]),s._v(" 2.4 客户端命令行操作")]),s._v(" "),r("p",[r("a",{attrs:{"data-fancybox":"",title:"客户端命令行操作",href:"../image/zookeeper10.jpg"}},[r("img",{attrs:{src:t(672),alt:"客户端命令行操作"}})])]),s._v(" "),r("ol",[r("li",[s._v("启动客户端  --zkCli.sh -server 127.0.0.1:2181")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ol",{attrs:{start:"2"}},[r("li",[s._v("显示所有操作命令 --help")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("] help\nZooKeeper "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server host"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("port cmd args\n\tstat path [watch]\n\t"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" path data [version]\n\tls path [watch]\n\tdelquota ["),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n|"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b] path\n\tls2 path [watch]\n\tsetAcl path acl\n\tsetquota "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n|"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("b val path\n\thistory \n\tredo cmdno\n\tprintwatches "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v("|off\n\tdelete path [version]\n\tsync path\n\tlistquota path\n\trmr path\n\t"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" path [watch]\n\tcreate ["),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s] ["),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e] path data acl\n\taddauth scheme auth\n\tquit \n\tgetAcl path\n\tclose \n\tconnect host"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("port\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br")])]),r("ol",{attrs:{start:"3"}},[r("li",[s._v("查看当前znode中所包含的内容 -- ls /")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("] ls "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n[zookeeper"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tqk]\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ol",{attrs:{start:"4"}},[r("li",[s._v("查看当前节点详细数据  --ls2 /")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("] ls2 "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n[zookeeper"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tqk]\ncZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x0\nctime "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Thu Jan "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("08")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v(" CST "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1970")]),s._v("\nmZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x0\nmtime "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Thu Jan "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("08")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v(" CST "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1970")]),s._v("\npZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x100000002\ncversion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndataVersion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naclVersion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x0\ndataLength "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nnumChildren "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br")])]),r("ol",{attrs:{start:"5"}},[r("li",[s._v("分别创建2个普通节点  --create /节点名")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("] create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo  "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wuguo"')]),s._v("\nCreated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo\n[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("] create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shuguo  "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"诸葛亮"')]),s._v("\nCreated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shuguo\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])]),r("ol",{attrs:{start:"6"}},[r("li",[s._v("获得节点的值")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("] "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shuguo\n诸葛亮\ncZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x100000006\nctime "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sun May "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),s._v(" CST "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("\nmZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x100000006\nmtime "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sun May "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),s._v(" CST "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("\npZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x100000006\ncversion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndataVersion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naclVersion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x0\ndataLength "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\nnumChildren "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br")])]),r("ol",{attrs:{start:"7"}},[r("li",[s._v("创建短暂节点")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("] create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"周瑜"')]),s._v("\nCreated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("（1）在当前客户端是能查看到的")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("] "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo\n周瑜\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("（2）退出当前客户端然后再重启客户端")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("quit\nsh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("（3）再次查看根目录下短暂节点已经删除")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("] "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo \nNode does "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" exist"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br")])]),r("ol",{attrs:{start:"8"}},[r("li",[r("p",[s._v("创建带序号的节点\n（1）先创建一个普通的根节点/sanguo/weiguo")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"曹操"')]),s._v("\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v('（2）创建带序号的节点 -- create -s XXX "XXX"')]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("] create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"许诸"')]),s._v("\nCreated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo0000000004\n[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("] create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"许诸"')]),s._v("\nCreated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo0000000005\n[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("] create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"许诸"')]),s._v("\nCreated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo0000000006\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br")])]),r("p",[s._v("如果原来没有序号节点，序号从0开始依次递增。如果原节点下已有2个节点，则再排序时从2开始，以此类推。")])]),s._v(" "),r("li",[r("p",[s._v('修改节点数据值 -- set -s XXX "XXX"')]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo0000000005  "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"司马懿"')]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])])]),s._v(" "),r("li",[r("p",[s._v("节点的值变化监听\n（1）在hadoop104主机上注册监听/sanguo节点数据变化")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("   "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo watch\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("（2）在hadoop103主机上修改/sanguo节点的数据")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo0000000006  "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"典韦"')]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("（3）观察hadoop104主机收到数据变化的监听")]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2182")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("] "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo0000000006\n典韦\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])])])]),s._v(" "),r("p",[s._v("WATCHER::\nWatchedEvent state:SyncConnected type:NodeDataChanged path:/sanguo")]),s._v(" "),r("ol",{attrs:{start:"11"}},[r("li",[s._v("节点的子节点变化监听（路径变化）\n（1）在hadoop104主机上注册监听/sanguo节点的子节点变化"),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("   ls "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo watch\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),s._v("（2）在hadoop103主机/sanguo节点上创建子节点"),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2182")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("] create "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"孙权"')]),s._v("\nCreated "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo0000000007\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),s._v("（3）观察hadoop104主机收到子节点变化的监听"),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("WATCHER"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\nWatchedEvent state"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("SyncConnected "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("NodeChildrenChanged path"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo\n[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("] "),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wuguo0000000007\n孙权\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br")])])]),s._v(" "),r("li",[s._v("删除节点"),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("delete "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("weiguo\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])])]),s._v(" "),r("li",[s._v("递归删除节点")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v(" rmr "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shuguo\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("ol",{attrs:{start:"14"}},[r("li",[s._v("查看节点状态")])]),s._v(" "),r("div",{staticClass:"language-vb line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-vb"}},[r("code",[s._v("[zk"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("] stat "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sanguo       \ncZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x100000005\nctime "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sun May "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" CST "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("\nmZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x100000005\nmtime "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Sun May "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" CST "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("\npZxid "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x100000017\ncversion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("\ndataVersion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\naclVersion "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nephemeralOwner "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("x0\ndataLength "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nnumChildren "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);