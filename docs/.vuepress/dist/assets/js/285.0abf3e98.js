(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{1642:function(s,a,t){"use strict";t.r(a);var r=t(26),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_2-zookeeper安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-zookeeper安装"}},[s._v("#")]),s._v(" 2. Zookeeper安装")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#_2-1-zookeeper单机版安装"}},[s._v("2.1 zookeeper单机版安装")])]),t("li",[t("a",{attrs:{href:"#_2-2-配置参数解读"}},[s._v("2.2 配置参数解读")])]),t("li",[t("a",{attrs:{href:"#_2-3-zookeeper分布式安装"}},[s._v("2.3 zookeeper分布式安装")]),t("ul",[t("li",[t("a",{attrs:{href:"#_2-3-1-集群的规划"}},[s._v("2.3.1 集群的规划")])]),t("li",[t("a",{attrs:{href:"#_2-3-2-创建-usr-local-zk-cluster"}},[s._v("2.3.2 创建/usr/local/zk-cluster")])]),t("li",[t("a",{attrs:{href:"#_2-3-3-复制三个zk"}},[s._v("2.3.3 复制三个zk")])]),t("li",[t("a",{attrs:{href:"#_2-3-4-创建log-data目录"}},[s._v("2.3.4 创建log/data目录")])]),t("li",[t("a",{attrs:{href:"#_2-3-5-创建data-myid文件"}},[s._v("2.3.5 创建data/myid文件")])]),t("li",[t("a",{attrs:{href:"#_2-3-6-分别修改data-myid文件"}},[s._v("2.3.6 分别修改data/myid文件")])]),t("li",[t("a",{attrs:{href:"#_2-3-5-分别修改conf-zoo-cfg文件"}},[s._v("2.3.5 分别修改conf/zoo.cfg文件")])]),t("li",[t("a",{attrs:{href:"#_2-3-6-服务端启动"}},[s._v("2.3.6 服务端启动")])]),t("li",[t("a",{attrs:{href:"#_2-3-7-客户端启动"}},[s._v("2.3.7 客户端启动")])])])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"_2-1-zookeeper单机版安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-zookeeper单机版安装"}},[s._v("#")]),s._v(" 2.1 zookeeper单机版安装")]),s._v(" "),t("p",[t("font",{attrs:{color:"red",size:"4"}},[t("strong",[s._v("建议使用3.5.x版本")])])],1),s._v(" "),t("p",[t("font",{attrs:{color:"red",size:"4"}},[t("strong",[s._v("1. 安装前准备")])]),t("br"),s._v("\n（1）安装 Jdk"),t("br"),s._v("\n（2）上传zookeeper 安装包到 Linux 系统下(apache-zookeeper-3.6.3-bin.tar.gz)"),t("br"),s._v("\n（3）解压到指定目录")],1),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("tar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zxvf apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("C "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("font",{attrs:{color:"red",size:"4"}},[t("strong",[s._v("2．配置修改")])]),t("br"),s._v("\n（1）将/usr/local/zookeeper/apache-zookeeper-3.6.3-bin/conf 这个路径下的 zoo_sample.cfg 修改为 zoo.cfg；")],1),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("mv zoo_sample"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg  zoo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（2）打开 zoo.cfg 文件，修改 dataDir 路径："),t("br"),s._v("\nvim zoo.cfg")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("dataDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkData\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（3）在/usr/local/zookeeper/apache-zookeeper-3.6.3-bin/这个目录上创建 zkData 文件夹")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v(" mkdir zkData\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("font",{attrs:{color:"red",size:"4"}},[t("strong",[s._v("3．操作 Zookeeper")])]),t("br"),s._v("\n（1）启动 Zookeeper  -- sh zkServer.sh start")],1),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("[root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sh zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java\nZooKeeper JMX enabled by "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\nStarting zookeeper "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" STARTED\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("（2）查看进程是否启动  --jps")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("[root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10752")]),s._v(" blog"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jar\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30913")]),s._v(" Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30726")]),s._v(" QuorumPeerMain\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("（3）查看状态：  --sh zkServer.sh status")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("[root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sh zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java\nZooKeeper JMX enabled by "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\nClient port found"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" Client address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" Client SSL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nMode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" standalone\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("（4）启动客户端：\n--sh zkCli.sh\n--./zkCli.sh -server 本机ip:zookeeper端口号")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v(" sh zkCli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2185")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("（5）退出客户端：  --quit")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("[zk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONNECTED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("] quit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（6）停止 Zookeeper  --sh zkServer.sh stop")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("[root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("@")]),s._v("VM"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("centos bin]"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sh zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("java\nZooKeeper JMX enabled by "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\nStopping zookeeper "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" STOPPED\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"_2-2-配置参数解读"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置参数解读"}},[s._v("#")]),s._v(" 2.2 配置参数解读")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("Zookeeper中的配置文件zoo.cfg中参数含义解读如下：")]),s._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("1．tickTime =2000：通信心跳数，Zookeeper 服务器与客户端心跳时间，单位毫秒 ")])]),t("br"),s._v("\nZookeeper使用的基本时间，服务器之间或客户端与服务器之间维持心跳的时间间隔，\n也就是每个tickTime时间就会发送一个心跳，时间单位为毫秒。\n它用于心跳机制，并且设置最小的session超时时间为两倍心跳时间。(session的最小超时时间是2*tickTime)"),t("br"),s._v(" "),t("font",{attrs:{color:"red"}},[t("strong",[s._v("2．initLimit =10：LF 初始通信时限")])]),t("br"),s._v("\n集群中的Follower跟随者服务器与Leader领导者服务器之间初始连接时能容忍的最多心\n跳数（tickTime的数量），用它来限定集群中的Zookeeper服务器连接到Leader的时限。"),t("br"),s._v(" "),t("font",{attrs:{color:"red"}},[t("strong",[s._v("3．syncLimit =5：LF 同步通信时限")])]),t("br"),s._v("\n集群中Leader与Follower之间的最大响应时间单位，假如响应超过syncLimit *\ntickTime，Leader认为Follwer死掉，从服务器列表中删除Follwer。"),t("br"),s._v(" "),t("font",{attrs:{color:"red"}},[t("strong",[s._v("4．dataDir：数据文件目录+数据持久化路径")])]),t("br"),s._v("\n主要用于保存 Zookeeper 中的数据。"),t("br"),s._v(" "),t("font",{attrs:{color:"red"}},[t("strong",[s._v("5．clientPort =2181：客户端连接端口")])]),t("br"),s._v("\n监听客户端连接的端口。")],1)]),s._v(" "),t("h2",{attrs:{id:"_2-3-zookeeper分布式安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-zookeeper分布式安装"}},[s._v("#")]),s._v(" 2.3 zookeeper分布式安装")]),s._v(" "),t("h3",{attrs:{id:"_2-3-1-集群的规划"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-集群的规划"}},[s._v("#")]),s._v(" 2.3.1 集群的规划")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("机器编号\tIp 地址\t端口  \nZk-1\t49.232.21.151\t2181  \nZk-2\t49.232.21.151\t2182   \nZk-3\t49.232.21.151\t2183   \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_2-3-2-创建-usr-local-zk-cluster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-创建-usr-local-zk-cluster"}},[s._v("#")]),s._v(" 2.3.2 创建/usr/local/zk-cluster")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("mkdir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-3-3-复制三个zk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3-复制三个zk"}},[s._v("#")]),s._v(" 2.3.3 复制三个zk")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("cp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ncp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\ncp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.6")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_2-3-4-创建log-data目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-4-创建log-data目录"}},[s._v("#")]),s._v(" 2.3.4 创建log/data目录")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("mkdir  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\nmkdir  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\nmkdir  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n\nmkdir  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\nmkdir  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\nmkdir  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_2-3-5-创建data-myid文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-5-创建data-myid文件"}},[s._v("#")]),s._v(" 2.3.5 创建data/myid文件")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("touch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n\ntouch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n\ntouch "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"_2-3-6-分别修改data-myid文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-6-分别修改data-myid文件"}},[s._v("#")]),s._v(" 2.3.6 分别修改data/myid文件")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("vim "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nvim "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nvim "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myid\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_2-3-5-分别修改conf-zoo-cfg文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-5-分别修改conf-zoo-cfg文件"}},[s._v("#")]),s._v(" 2.3.5 分别修改conf/zoo.cfg文件")]),s._v(" "),t("ol",[t("li",[s._v("conf目录下的zoo_sample.cfg为zoo.cfg")])]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("mv zoo_sample"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg  zoo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("打开zoo.cfg文件  -- vim zoo.cfg\n修改数据存储路径配置")])]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("dataDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\ndataLogDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("增加如下配置")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("quorumListenOnAllIPs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\nserver"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2186")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3886")]),s._v("\nserver"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2189")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3889")]),s._v("\nserver"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2187")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3887")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("三台zookeeper分别进行修改")])])],1),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" milliseconds "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("each")]),s._v(" tick\ntickTime"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" ticks that the initial\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" synchronization phase can take\ninitLimit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" ticks that can pass between\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" sending a request "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" getting an acknowledgement\nsyncLimit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" the directory where the snapshot "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" stored"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" use "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" storage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp here "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" just\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" example sakes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\ndataDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\ndataLogDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" the port at which the clients will connect\nclientPort"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" the maximum number "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" client connections"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" increase this "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you need "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" handle more clients\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("maxClientCnxns"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nquorumListenOnAllIPs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\nserver"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2186")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3886")]),s._v("\nserver"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2189")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3889")]),s._v("\nserver"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("49.232")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".21")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".151")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2187")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3887")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" Be sure "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" read the maintenance section "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" the\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" administrator guide before turning "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" autopurge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("doc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("current"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeperAdmin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("sc_maintenance\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" The number "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" snapshots "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" retain "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" dataDir\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("autopurge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("snapRetainCount"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" Purge task interval "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hours\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" disable auto purge feature\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("autopurge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("purgeInterval"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("同步zoo.cfg配置文件")])]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v(" xsync zoo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("配置参数解读"),t("br"),s._v("\nserver.A=B:C:D。"),t("br"),s._v("\nA是一个数字，表示这个是第几号服务器；"),t("br"),s._v("\n集群模式下配置一个文件myid，这个文件在dataDir目录下，这个文件里面有一个数据就是A的值，Zookeeper启动时读取此文件，拿到里面的数据与zoo.cfg里面的配置信息比较从而判断到底是哪个server。"),t("br"),s._v("\nB是这个服务器的ip地址；"),t("br"),s._v("\nC是这个服务器与集群中的Leader服务器交换信息的端口；"),t("br"),s._v("\nD是万一集群中的Leader服务器挂了，需要一个端口来重新进行选举，选出一个新的Leader，而这个端口就是用来执行选举时服务器相互通信的端口。")])]),s._v(" "),t("h3",{attrs:{id:"_2-3-6-服务端启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-6-服务端启动"}},[s._v("#")]),s._v(" 2.3.6 服务端启动")]),s._v(" "),t("p",[s._v("分别启动三台zookeeper服务器")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v(" sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("分别查看三台zookeeper服务状态")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v(" sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh status\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("分别停用三台zookeeper服务")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[s._v(" sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkServer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("stop")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("到此我们集群搭建完成\n可以测试一下\n在zk1下面创建一个节点\n看看zk2和zk3下面有没有")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_2-3-7-客户端启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-7-客户端启动"}},[s._v("#")]),s._v(" 2.3.7 客户端启动")]),s._v(" "),t("p",[s._v("客户端连接zk1 zk2 zk3")]),s._v(" "),t("div",{staticClass:"language-vb line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-vb"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("  \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2182")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zk"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zkCli"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2183")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);