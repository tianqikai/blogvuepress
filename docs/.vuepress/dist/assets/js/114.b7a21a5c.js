(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{1515:function(t,a,s){"use strict";s.r(a);var n=s(26),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"_2-sentinel控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-sentinel控制台"}},[t._v("#")]),t._v(" 2. Sentinel控制台")]),t._v(" "),n("p",[t._v("Sentinel 提供一个轻量级的开源控制台，它提供机器发现以及健康情况管理、监控（单机和集群），规则管理和推送的功能。")]),t._v(" "),n("p",[n("a",{attrs:{herf:"https://github.com/alibaba/Sentinel/wiki/%E6%8E%A7%E5%88%B6%E5%8F%B0"}},[t._v("官网文档：https://github.com/alibaba/Sentinel/wiki/%E6%8E%A7%E5%88%B6%E5%8F%B0")])]),t._v(" "),n("h2",{attrs:{id:"_2-1-获取控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-获取控制台"}},[t._v("#")]),t._v(" 2.1 获取控制台")]),t._v(" "),n("p",[t._v("您可以从"),n("a",{attrs:{herf:"https://github.com/alibaba/Sentinel/releases"}},[t._v("release 页面")]),t._v(" 下载最新版本的控制台 jar 包。")]),t._v(" "),n("p",[t._v("也可以从最新版本的源码自行构建 Sentinel 控制台：")]),t._v(" "),n("ol",[n("li",[t._v("下载 "),n("a",{attrs:{herf:"https://github.com/alibaba/Sentinel/tree/master/sentinel-dashboard"}},[t._v("控制台")]),t._v(" 工程")]),t._v(" "),n("li",[t._v("使用以下命令将代码打包成一个 fat jar: mvn clean package")])]),t._v(" "),n("h2",{attrs:{id:"_2-2-启动控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-启动控制台"}},[t._v("#")]),t._v(" 2.2 启动控制台")]),t._v(" "),n("p",[n("strong",[t._v("Linux版本")])]),t._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" java -Dserver.port"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8901")]),t._v(" -Dcsp.sentinel.dashboard.server"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("49.233")]),t._v(".34.168:8901 -Dproject.name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sentinel-dashboard -jar sentinel-dashboard-1.7.1.jar "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[n("strong",[t._v("Window版本")])]),t._v(" "),n("div",{staticClass:"language-bat line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("java -Dserver.port=8901 -Dcsp.sentinel.dashboard.server=localhost:8901 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard-1.7.1.jar pause\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h2",{attrs:{id:"_2-3-登录控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-登录控制台"}},[t._v("#")]),t._v(" 2.3 登录控制台")]),t._v(" "),n("p",[n("a",{attrs:{herf:"49.233.34.168:8901"}},[t._v("49.233.34.168:8901")])]),t._v(" "),n("p",[t._v("从 Sentinel 1.6.0 起，Sentinel 控制台引入基本的登录功能，"),n("strong",[t._v("默认用户名和密码都是 sentinel")]),t._v(" 。可以参考鉴权模块文档配置用户名和密码。")]),t._v(" "),n("p",[n("a",{attrs:{"data-fancybox":"",title:" Sentinel",href:"./image/Sentinel04.jpg"}},[n("img",{attrs:{src:s(910),alt:"Sentinel"}})])]),t._v(" "),n("h2",{attrs:{id:"_2-4-环境准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-环境准备"}},[t._v("#")]),t._v(" 2.4 环境准备")]),t._v(" "),n("h3",{attrs:{id:"_2-4-1-搭建项目"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1-搭建项目"}},[t._v("#")]),t._v(" 2.4.1 搭建项目")]),t._v(" "),n("p",[t._v("eureka-server ：注册中心\neureka-server02 ：注册中心\nproduct-service ：商品服务，提供了 /product/{id} 接口\norder-service-rest ：订单服务，基于 Ribbon 通过 RestTemplate 调用商品服务\norder-server-feign ：订单服务，基于 Feign 通过声明式服务调用商品服务")]),t._v(" "),n("p",[n("a",{attrs:{"data-fancybox":"",title:" Sentinel",href:"./image/Sentinel05.jpg"}},[n("img",{attrs:{src:s(911),alt:"Sentinel"}})])]),t._v(" "),n("h3",{attrs:{id:"_2-4-2-客户端接入控制台"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2-客户端接入控制台"}},[t._v("#")]),t._v(" 2.4.2 客户端接入控制台")]),t._v(" "),n("h4",{attrs:{id:"父工程需要添加如下依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#父工程需要添加如下依赖"}},[t._v("#")]),t._v(" 父工程需要添加如下依赖")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencyManagement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n             "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.cloud"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n             "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-alibaba-dependencies"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n             "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.1.0.RELEASE"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n             "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("pom"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n             "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("import"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scope")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependencyManagement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("h4",{attrs:{id:"子工程需要添加如下依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#子工程需要添加如下依赖"}},[t._v("#")]),t._v(" 子工程需要添加如下依赖")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- spring boot sentinel 依赖 --\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.cloud"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-alibaba-sentinel"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h4",{attrs:{id:"配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),n("div",{staticClass:"language-yml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#客户端启动 Transport 模块来与 Sentinel 控制台进行通信")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("sentinel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("transport")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8719")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dashboard")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8901")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("h4",{attrs:{id:"初始化客户端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化客户端"}},[t._v("#")]),t._v(" 初始化客户端")]),t._v(" "),n("p",[n("strong",[t._v("确保客户端有访问量，Sentinel 会在客户端首次调用的时候进行初始化，开始向控制台发送心跳包。")]),t._v("\n简单的理解就是：访问一次客户端，Sentinel 即可完成客户端初始化操作，并持续向控制台发送心跳包。")]),t._v(" "),n("p",[t._v("首先确保 Sentinel 是启动状态，然后依次启动 eureka-server，eureka-server02，product-service，order-service-rest。")]),t._v(" "),n("p",[t._v("多次访问：http://localhost:9090/order/1 然后查看控制台 实时监控 结果如下")]),t._v(" "),n("p",[n("a",{attrs:{"data-fancybox":"",title:" Sentinel",href:"./image/Sentinel06.jpg"}},[n("img",{attrs:{src:s(312),alt:"Sentinel"}})])])])}),[],!1,null,null,null);a.default=e.exports},312:function(t,a,s){t.exports=s.p+"assets/img/Sentinel06.15abc127.jpg"},910:function(t,a,s){t.exports=s.p+"assets/img/Sentinel04.ab59656b.jpg"},911:function(t,a,s){t.exports=s.p+"assets/img/Sentinel05.74308bc0.jpg"}}]);